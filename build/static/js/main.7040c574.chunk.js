(this.webpackJsonpmywork=this.webpackJsonpmywork||[]).push([[0],{140:function(e,t,a){},261:function(e,t,a){},344:function(e,t,a){e.exports=a(591)},349:function(e,t,a){},554:function(e,t,a){},591:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),o=(a(349),a(3)),l=a(155),s=a(17),u=a(5),m=a(272),d=a(635),p=a(637),f=a(275),g=a.n(f),h=a(274),v=a.n(h),b=a(273),E=a.n(b),O=a(638),y=Object(m.a)({root:{width:"100%",position:"fixed",right:0,bottom:0,borderTop:"1px solid #A9A9A9"}});function j(e){var t=y(),a=e.whichPage,n=e.onSelect,c=e.nextstickerUsersIncreased;return r.a.createElement(d.a,{value:a,onChange:function(e,t){n(t)},className:t.root},r.a.createElement(p.a,{icon:r.a.createElement(O.a,{badgeContent:c,color:"secondary"},r.a.createElement(E.a,null))}),r.a.createElement(p.a,{icon:r.a.createElement(v.a,null)}),r.a.createElement(p.a,{icon:r.a.createElement(g.a,null)}))}var w=a(641),x=a(276),S=a.n(x),k=a(640),C=a(639),N=Object(m.a)((function(e){return{root:{textAlign:"center"}}}));function A(e){var t=e.title,a=e.history,n=N();return r.a.createElement(C.a,null,r.a.createElement(k.a,null,a?r.a.createElement(w.a,{edge:"start",color:"inherit",onClick:function(){a.goBack()}},r.a.createElement(S.a,null)):null,r.a.createElement("div",{className:n.root},r.a.createElement("p",null,t))))}var I=a(642),T=a(278),R=a.n(T),D=a(279),P=a.n(D),L=Object(m.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),position:"fixed",right:e.spacing(1),bottom:e.spacing(8)}}}}));function _(e){var t=e.add,a=e.push,n=e.clear,c=e.arrange,i=L(),o=Object(l.f)();return r.a.createElement("div",{className:i.root},r.a.createElement(I.a,{color:"primary","aria-label":"add",onClick:a?function(){o.push("./submit")}:function(){o.goBack(),c&&n()}},t?r.a.createElement(R.a,null):r.a.createElement(P.a,null)))}var U=a(280),G=a.n(U),M=a(28),F=a(675),W=a(649),H=a(91),B=a(672),z=a(644),K=a(648),V=a(647),Y=a(643),J=a(645),X=a(646),Q=a(196),q=Object(m.a)({table:{minWidth:"650"}});function Z(e){var t=e.rows,a=q();return r.a.createElement(Y.a,{component:Q.a},r.a.createElement(z.a,{className:a.table,"aria-label":"simple dense table"},r.a.createElement(J.a,null,r.a.createElement(X.a,null,r.a.createElement(V.a,null,"\u65e5\u671f"),r.a.createElement(V.a,{align:"right"},"\u955c\u5934"),r.a.createElement(V.a,{align:"right"},"\u8282\u76ee"),r.a.createElement(V.a,{align:"right"},"\u63cf\u8ff0"))),r.a.createElement(K.a,null,t&&t.length>0?r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(X.a,{key:t},r.a.createElement(V.a,{component:"th",scope:"row"},"".concat(new Date(e.date).getMonth()+1,"\u6708").concat(new Date(e.date).getDate(),"\u65e5")),r.a.createElement(V.a,{align:"right"},e.shootnums),r.a.createElement(V.a,{align:"right"},e.program),r.a.createElement(V.a,{align:"right"},e.des))}))):null)))}function $(e){var t=e.children,a=e.value,n=e.index,c=Object(o.a)(e,["children","value","index"]);return r.a.createElement(H.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"scrollable-auto-tabpanel-".concat(n),"aria-labelledby":"scrollable-auto-tab-".concat(n)},c),a===n&&r.a.createElement(B.a,{p:3},t))}var ee=Object(m.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,width:"100%"},div:{height:e.spacing(7)}}}));function te(e){var t=e.rows,a=ee(),n=Object(M.a)(),c=r.a.useState(0),i=Object(u.a)(c,2),o=i[0],l=i[1];return r.a.createElement("div",{className:a.root},t&&t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{position:"static",color:"default"},r.a.createElement(F.a,{value:o,onChange:function(e,t){l(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",scrollButtons:"auto","aria-label":"scrollable auto tabs example"},t.map((function(e,t){return r.a.createElement(W.a,Object.assign({key:t,label:e[0].whose.name},function(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}(t)))})))),r.a.createElement(G.a,{axis:"rtl"===n.direction?"x-reverse":"x",index:o,onChangeIndex:function(e){l(e)}},t.map((function(e,t){return r.a.createElement($,{key:t,value:o,index:t,dir:n.direction},r.a.createElement(Z,{rows:e}))}))),r.a.createElement("div",{className:a.div})):null)}var ae=a(81),ne=a(39),re=a(9),ce=a.n(re),ie=a(30),oe={position:"relative",width:"100%",height:"100%"},le=["https://cn.bing.com/th?id=OIP.WMpknoaU9SsncVEW7W6SzAHaLH&pid=Api&rs=1","http://youimg1.c-ctrip.com/target/fd/tg/g4/M0A/CA/30/CggYHlbEXmaAYGfJAAnFAUl5-Pk911.jpg"],se="AIzaSyB5LS2bbGE_Iw1e7Dc3_al7glDliILip_c",ue="fbe59813637de60223e3d22805a2486c",me="https://cdn.moji.com/websrc/video/video621.mp4",de="https://res.cloudinary.com/dnfhsjz8u/image/upload/v1620372687/u_4168080911_4188088242_fm_15_gp_0_qfgrpg.jpg";function pe(e,t,a){window.localStorage.setItem(e,JSON.stringify({expires:Date.now()+1e3*a,data:t}))}function fe(e){return JSON.parse(window.localStorage.getItem(e)||"{}")}function ge(e){window.localStorage.removeItem(e)}function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=new Date(e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()}var ve=["\u9ad8\u7ea7\u67dc\u5458","\u67dc\u5458","\u4e3b\u7ba1","\u5ba2\u6237\u7ecf\u7406"];function be(e){return[e.filter((function(e){return"\u9ad8\u7ea7\u67dc\u5458"===e.role})),e.filter((function(e){return"\u5ba2\u6237\u7ecf\u7406"===e.role})),e.filter((function(e){return"\u4e3b\u7ba1"===e.role})),e.filter((function(e){return"\u67dc\u5458"===e.role}))]}var Ee=[{name:"\u97a0\u5c0f\u9732",role:ve[0],isChoosed:!1,days:0},{name:"\u97a0\u9732",role:ve[1],isChoosed:!1,days:0},{name:"\u5c0f\u9732",role:ve[2],isChoosed:!1,days:0},{name:"\u97a0\u5c0f44",role:ve[3],isChoosed:!1,days:0},{name:"\u97a066",role:ve[0],isChoosed:!1,days:0},{name:"\u97a0\u5c0f\u9732\u7a81\u7a81\u7a81",role:ve[0],isChoosed:!1,days:0}];function Oe(e){return e.includes('src="')?e.split('src="')[1].split('"')[0]:e}function ye(e){if(e&&e.length>0){for(var t=0;t<e.length;t++)e[t].name=new Date(e[t].name).getMonth()+1+"/"+new Date(e[t].name).getDate();return e}return e}function je(){for(var e="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),t="#",a=0;a<6;a++)t+=e[Math.floor(16*Math.random())];if("#ffffff"!==t)return t;t()}function we(){var e=0;return document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e}function xe(){return document.body.clientHeight&&document.documentElement.clientHeight?document.body.clientHeight<document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight:document.body.clientHeight>document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight}function Se(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}var ke=function(e){return new Promise((function(t,a){var n=new Image;n.src=e;var r=setInterval((function(){(n.width>0||n.height>0)&&(clearInterval(r),t(n))}),10)}))},Ce=function(){var e=Object(ie.a)(ce.a.mark((function e(t,a){var n,r;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(t);case 2:return n=e.sent,r=Math.floor(n.height*a/n.width),n.height=r,n.width=a,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ne=Math.floor(document.body.clientWidth/2),Ae=function(e){for(var t in e)if(""===e[t])return!1;return!0},Ie=["https://tse3-mm.cn.bing.net/th/id/OIP.RiVuBdPbyZfUqwaC_rMgaAHaFj?w=200&h=189&c=7&o=5&dpr=2&pid=1.7","https://tse3-mm.cn.bing.net/th/id/OIP.PjwD3caT4zGrmyx5OSmsXQHaE7?w=285&h=185&c=7&o=5&dpr=2&pid=1.7","https://tse4-mm.cn.bing.net/th/id/OIP.D9KCoJ2Szl3p8iiUt1XQ7wHaJQ?w=166&h=198&c=7&o=5&dpr=2&pid=1.7","https://tse2-mm.cn.bing.net/th/id/OIP.SAwRQOIAiwRcVE35WAu3lgHaEK?w=293&h=164&c=7&o=5&dpr=2&pid=1.7","https://tse2-mm.cn.bing.net/th/id/OIP.kzjuEOfhlRGHlAU7XTcRtgHaNJ?w=115&h=184&c=7&o=5&dpr=2&pid=1.7","https://tse3-mm.cn.bing.net/th/id/OIP.rb333I9ISUGd2y2bjn-qiQAAAA?w=299&h=194&c=7&o=5&dpr=2&pid=1.7","https://tse3-mm.cn.bing.net/th/id/OIP.qEiMn_h7rMBHf9QlQw8k2QHaEo?w=260&h=162&c=7&o=5&dpr=2&pid=1.7","https://tse2-mm.cn.bing.net/th/id/OIP._-DDuCgiElSuM37yuL-x9wHaE4?w=275&h=177&c=7&o=5&dpr=2&pid=1.7","https://tse3-mm.cn.bing.net/th/id/OIP.s_SXVVhK1MZhrGXQjWdOUAHaFm?w=212&h=160&c=7&o=5&dpr=2&pid=1.7"],Te=function e(t,a,n,r,c,i,o,l,s){Object(ne.a)(this,e),this.uid=t,this.tripName=a,this.designer=n,this.domestic=r,this.city=c,this.country=i,this.tags=o,this.cover=l,this.detail=s},Re=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"contructor",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(ne.a)(this,e),this.nameOfScence=t,this.longitude=a,this.latitude=n,this.des=r,this.picURL=c,this.pointOrNot=i,this.contructor=o,this.category=l,this.done=s},De={width:"400px",margin:"5px",height:"120px",display:"flex",flexDirection:"row",flexWrap:"wrap",padding:"5px",backgroundColor:"#f0f0f0",borderRadius:"5px"},Pe=["\u6587\u5316","\u53e4\u90fd","\u901b\u5403","\u871c\u6708","\u81ea\u9a7e","\u5468\u672b","\u5927\u6d77","\u53e4\u5efa\u7b51","\u8349\u539f","\u85cf\u4f20\u4f5b\u6559","\u98ce\u666f","\u957f\u5047","\u6625\u8282","\u4e50\u56ed","\u7279\u79cd\u5175","\u4eba\u6587"],Le=function(e){return e?Object.keys(e[0]).filter((function(e){return"name"!==e})):null},_e=Object(m.a)((function(e){return{root:{display:"flex",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center"}}}));function Ue(e){var t=e.data,a=e.width,n=_e();return r.a.createElement(r.a.Fragment,null,Le(t)?r.a.createElement(ae.d,{width:a,height:200,data:t},r.a.createElement(ae.a,{strokeDasharray:"3 3"}),r.a.createElement(ae.f,{dataKey:"name"}),r.a.createElement(ae.g,null),r.a.createElement(ae.e,null),r.a.createElement(ae.b,null),Le(t).map((function(e){return r.a.createElement(ae.c,{type:"monotone",key:e,dataKey:e,stroke:je()})}))):r.a.createElement("div",{className:n.root},"\u6682\u65e0\u6570\u636e"))}var Ge=Object(m.a)((function(e){return{root:{display:"flex",flexDirection:"column",height:"100%"}}})),Me=function(e){var t=e.data,a=e.rows,n=e.width,c=Ge();return r.a.createElement("div",{className:c.root},r.a.createElement(Ue,{data:t,width:n}),r.a.createElement(te,{rows:a}),r.a.createElement(_,{add:!0,push:!0}))},Fe=a(14),We=a.n(Fe);a(554);function He(e){var t=e.day,a=e.onSelect;if(!t)return r.a.createElement("td",{className:"null"});var n=[],c=he();t<c&&n.push("disabled"),[6,0].includes(new Date(t).getDay())&&n.push("weekend");var i=c===t?"\u4eca\u5929":new Date(t).getDate();return r.a.createElement("td",{className:We()(n),onClick:function(){return a(t)}},i)}function Be(e){var t=e.days,a=e.onSelect;return r.a.createElement("tr",{className:"date-table-days"},t.map((function(e,t){return r.a.createElement(He,{key:t,day:e,onSelect:a})})))}function ze(e){for(var t=e.startingTimeInMonth,a=e.onSelect,n=e.block,c=new Date(t),i=new Date(t),o=[];o.length!==21-n;)o.push(i.getTime()),i.setDate(i.getDate()+1);o=new Array(c.getDay()?c.getDay()-1:6).fill(null).concat(o);for(var l=[],s=0;s<o.length/7;++s){var u=o.slice(7*s,7*(s+1));l.push(u)}return r.a.createElement("table",{className:"date-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"7"},r.a.createElement("h5",null,(new Date).getFullYear(),"\u5e74",(new Date).getMonth()+1,"\u6708")))),r.a.createElement("tbody",null,r.a.createElement("tr",{className:"data-table-weeks"},r.a.createElement("th",{className:"date-table-th"},"\u5468\u4e00"),r.a.createElement("th",{className:"date-table-th"},"\u5468\u4e8c"),r.a.createElement("th",{className:"date-table-th"},"\u5468\u4e09"),r.a.createElement("th",{className:"date-table-th"},"\u5468\u56db"),r.a.createElement("th",{className:"date-table-th"},"\u5468\u4e94"),r.a.createElement("th",{className:"weekend"},"\u5468\u516d"),r.a.createElement("th",{className:"weekend"},"\u5468\u65e5")),l.map((function(e,t){return r.a.createElement(Be,{key:t,days:e,onSelect:a})}))))}function Ke(e){var t=e.onSelect,a=new Date,n=(new Date).getDate(),c=(new Date).getDay();a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);var i=function(e,t){var a=null;return{day:a=0===t&&e>6?e-6:0===t&&e<=6?1:e+1-t,block:1===a&&1!==t?t-1:0}}(n,c),o=i.day,l=i.block;a.setDate(o);var s=[a.getTime()];return r.a.createElement("div",{className:We()("date-selector")},r.a.createElement("div",{className:"date-selector-tables"},s.map((function(e){return r.a.createElement(ze,{key:e,onSelect:t,startingTimeInMonth:e,block:l})}))))}var Ve=a(677),Ye=a(103),Je=a.n(Ye),Xe=a(592),Qe=(a(261),Object(m.a)((function(e){return{root:{margin:e.spacing(2,2,0,2),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},div:{padding:e.spacing(1),display:"flex",flexDirection:"column",justifyContent:"center",paddingBottom:e.spacing(7)},div1:{padding:e.spacing(.5),marginBottom:e.spacing(2),border:"1px solid #f0f0f0",borderRadius:e.spacing(1),backgroundColor:"#f0f0f0"},chip:{margin:e.spacing(.5,.5,.5,0)},title:{position:"relative"},icon:{position:"absolute",top:0,right:0},div2:{display:"flex",justifyContent:"center",height:"100%"},div3:{height:"100%",overflow:"hidden"}}})));function qe(e){var t=e.arr,a=e.toArrange,c=e.clearDay,i=Object(n.useState)(!1),o=Object(u.a)(i,2),l=o[0],s=o[1],m=Qe();return Object(n.useEffect)((function(){0!==t.length&&s(!0)}),[t.length]),r.a.createElement("div",{className:m.div},t.map((function(e,t){return r.a.createElement(Xe.a,Object.assign({in:l,key:t},l?{timeout:500*t}:{}),r.a.createElement("div",{className:m.div1,key:e.date,onClick:function(){return a(t)}},r.a.createElement("div",{className:m.title},r.a.createElement(H.a,{variant:"h6",component:"h2"},"".concat(new Date(e.date).getMonth()+1,"\u6708").concat(new Date(e.date).getDate(),"\u65e5\u6392\u73ed\u60c5\u51b5\uff1a")),r.a.createElement(Je.a,{className:m.icon,onClick:function(e){return function(e,t){e.stopPropagation(),c(t)}(e,t)}})),r.a.createElement("div",null,e.list.map((function(e,t){return r.a.createElement(Ve.a,{color:"primary",key:e,label:e,className:m.chip,variant:"outlined"})})))))})))}var Ze=function(e){var t=e.onSelect,a=e.arrangeData,n=e.toArrange,c=e.clearDay,i=Qe();return r.a.createElement("div",{className:i.div3},r.a.createElement(Ke,{onSelect:t}),a&&a.length>0?r.a.createElement(qe,{arr:a,toArrange:n,clearDay:c}):r.a.createElement("div",{className:i.div2},"\u6682\u65e0\u6570\u636e"))},$e=a(651),et=a(678),tt=a(290),at=a.n(tt),nt=a(650),rt=Object(m.a)((function(e){return{root:{paddingTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",height:"100%",overflow:"hidden"},avatar:{width:e.spacing(13),height:e.spacing(13)},btn:{marginTop:e.spacing(4),width:e.spacing(20)},paper:{height:e.spacing(10),fontSize:20,display:"flex",alignItems:"center",justifyContent:"center"},container:{padding:e.spacing(5,1,0,1)},div:{height:e.spacing(9)}}}));function ct(e){var t=e.user,a=e.logout,n=e.history,c=e.flag,i=rt(),o=function(e){n.push({pathname:e})};return r.a.createElement("div",{className:i.root},r.a.createElement(et.a,{className:i.avatar,onClick:function(){"wudi"===t&&n.push("/logon")},src:de},t),r.a.createElement(nt.a,{container:!0,spacing:1,className:i.container},r.a.createElement(nt.a,{item:!0,xs:4},r.a.createElement(Q.a,{elevation:3,className:i.paper,onClick:function(){return o("/photosInput")}},"\u7167\u7247\u5f55\u5165")),r.a.createElement(nt.a,{item:!0,xs:4},r.a.createElement(Q.a,{elevation:3,className:i.paper,onClick:function(){return o("/photosEdit")}},"\u6240\u6709\u7167\u7247")),r.a.createElement(nt.a,{item:!0,xs:4},r.a.createElement(Q.a,{elevation:3,className:i.paper,onClick:function(){return o("/client")}},c?"\u6709\u65b0\u589e\u7528\u6237":"\u5168\u4f53\u5ba2\u6237")),r.a.createElement(nt.a,{item:!0,xs:6},r.a.createElement(Q.a,{elevation:3,className:i.paper,onClick:function(){return o("/story")}},"\u7011\u5e03\u6d41\u6570\u636e\u7f16\u8f91")),r.a.createElement(nt.a,{item:!0,xs:6},r.a.createElement(Q.a,{elevation:3,className:i.paper,onClick:function(){return o("/totalStorys")}},"\u6240\u6709\u7011\u5e03\u6d41\u6570\u636e")),r.a.createElement(nt.a,{item:!0,xs:4},r.a.createElement(Q.a,{elevation:3,className:i.paper,onClick:function(){return o("/editinit")}},"\u884c\u7a0b\u8bbe\u8ba1")),r.a.createElement(nt.a,{item:!0,xs:4},r.a.createElement(Q.a,{elevation:3,className:i.paper,onClick:function(){return o("/totalTrips")}},"\u5168\u90e8\u884c\u7a0b")),r.a.createElement(nt.a,{item:!0,xs:4},r.a.createElement(Q.a,{elevation:3,className:i.paper,onClick:function(){return o("/preview")}},"\u56fe\u7247\u9884\u89c8")),r.a.createElement(nt.a,{item:!0,xs:12},r.a.createElement(Q.a,{elevation:3,className:i.paper,onClick:function(){return o("/list")}},"\u884c\u7a0b\u5217\u8868"))),r.a.createElement($e.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(at.a,null),className:i.btn,onClick:function(){return a()}},"\u9000\u51fa\u767b\u5f55"),r.a.createElement("div",{className:i.div}))}function it(e){return{type:"SET_TRIP",payload:e}}function ot(e){return{type:"SET_LOADING",payload:e}}function lt(e){return{type:"SET_PAGEINDEX",payload:e}}function st(e){return{type:"SET_FENYE",payload:e}}function ut(e){return{type:"SET_USER",payload:e}}function mt(e){return{type:"SET_PAGE",payload:e}}function dt(e){return{type:"SET_WORKERS",payload:e}}function pt(e){return{type:"SET_RIGHT",payload:e}}function ft(e){return{type:"COUNT_SAGA",payload:e}}function gt(e){return{type:"NEWTRIP_SAGA",payload:e}}var ht=Object(m.a)((function(e){return{root:{padding:e.spacing(8,0,0,0),height:"100%"}}}));var vt=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=["\u7528\u6237","\u6392\u73ed","\u529e\u516c\u6570\u636e"],a=e.user,c=e.whichPage,i=e.fenye,o=e.history,l=e.arrangeData,s=e.chartData,m=e.tableData,d=e.all,p=e.loading,f=e.nextstickerUsersIncreased,g=e.dispatch,h=ht(),v=Object(n.useRef)(),b=Object(n.useRef)(),E=Object(n.useRef)(),O=Object(n.useState)(document.body.clientWidth),y=Object(u.a)(O,2),w=y[0],x=y[1];Object(n.useEffect)((function(){v.current=m,b.current=d,E.current=i})),Object(n.useEffect)((function(){return window.addEventListener("resize",S),function(){window.removeEventListener("resize",(function(){}))}}),[]);var S=function(){x(document.body.clientWidth)};Object(n.useEffect)((function(){return window.addEventListener("scroll",k),function(){window.removeEventListener("scroll",(function(){}))}}));var k=function(){if(Se()-we()-xe()<=20&&!p){if(!(function(e){var t=0;if(e){for(var a=0;a<e.length;a++)t+=e[a].length;return t}return t}(v.current)<b.current))return;g(ft(E.current))}};return Object(n.useEffect)((function(){g(ft(1)),g({type:"GET_ARRANGEDATA_SAGA"})}),[g]),r.a.createElement("div",{className:h.root},0===c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{title:t[c]}),r.a.createElement(ct,{user:a,logout:function(){g({type:"LOGOUT_SAGA"})},history:o,flag:f>0})),1===c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{title:t[c]}),r.a.createElement(Ze,{history:o,onSelect:function(e){var t=he();if(!(e<t)){if(l&&l.length>0){var a=l.findIndex((function(t){return t.date===e}));if(a>-1)for(var n=l[a].list,r=0;r<n.length;r++)g(dt(n[r]))}o.push({pathname:"/submitArrange",payload:{date:e}})}},arrangeData:l,toArrange:function(e){for(var t=l[e].list,a=0;a<t.length;a++)g(dt(t[a]));o.push({pathname:"/submitArrange",payload:{date:l[e].date}})},clearDay:function(e){g({type:"SET_ARRANGEDATA_DELETE",payload:e})}})),2===c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{title:t[c]}),r.a.createElement(Me,{data:ye(s),rows:m,width:w})),r.a.createElement(j,{onSelect:function(e){g(mt(e))},whichPage:c,nextstickerUsersIncreased:f}))})),bt=a(674),Et=a(148),Ot=a.n(Et),yt=a(291),jt=a(41),wt=a(673),xt=a(679),St=a(6),kt=Object(m.a)((function(e){return{root:{width:"100%"}}}));var Ct=Object(xt.a)((function(e){return{}})),Nt=Object(St.a)(Ct)((function(e){var t=e.getDate,a=kt(),n=r.a.useState(new Date),c=Object(u.a)(n,2),i=c[0],o=c[1];return r.a.createElement(jt.a,{utils:yt.a},r.a.createElement(wt.a,{value:i,onChange:function(e){o(e),t(he(e.$d))},autoOk:!0,variant:"inline",inputVariant:"outlined",format:"YYYY/MM/DD",className:a.root}))})),At=Object(m.a)((function(e){return{root:{margin:e.spacing(2,2,0,2),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},form:{margin:e.spacing(1),width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},submit:{width:"100%",margin:e.spacing(1),height:e.spacing(7)}}}));var It=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,a=At(),c=Object(n.useState)(0),i=Object(u.a)(c,2),o=i[0],l=i[1],s=Object(n.useState)(""),m=Object(u.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)(""),g=Object(u.a)(f,2),h=g[0],v=g[1],b=Object(n.useState)(he()),E=Object(u.a)(b,2),O=E[0],y=E[1];return r.a.createElement("div",{className:a.root},r.a.createElement("form",{className:a.form,noValidate:!0,autoComplete:"off"},r.a.createElement(bt.a,{className:a.submit,id:"number",label:"\u955c\u5934\u6570",variant:"outlined",onChange:function(e){l(e.target.value)}}),r.a.createElement(bt.a,{className:a.submit,id:"name",label:"\u8282\u76ee\u540d\u5b57",variant:"outlined",onChange:function(e){p(e.target.value)}}),r.a.createElement(bt.a,{className:a.submit,id:"sth",label:"\u5907\u6ce8",variant:"outlined",onChange:function(e){v(e.target.value)}}),r.a.createElement("div",{className:a.submit},r.a.createElement(Nt,{getDate:function(e){y(e)}})),r.a.createElement($e.a,{variant:"contained",color:"primary",className:a.submit,startIcon:r.a.createElement(Ot.a,null),onClick:function(){if(!o||!d)return alert("\u6709\u672a\u586b\u9879\uff01");var e={shootnums:o.trim(),program:d.trim(),des:h?h.trim():h,date:O};t({type:"SUBMIT_SAGA",payload:e})}},"\u63d0\u4ea4")),r.a.createElement(_,null))})),Tt=Object(m.a)((function(e){return{root:{margin:e.spacing(2,2,0,2),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},div:{padding:e.spacing(1),marginBottom:e.spacing(1),width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",border:"1px solid #f0f0f0",borderRadius:e.spacing(1)},submit:{width:"100%",margin:e.spacing(1),height:e.spacing(7)},chip:{margin:e.spacing(.5,.5,.5,0)}}}));var Rt=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=Tt(),a=e.workers,c=e.dispatch,i=e.list,o=e.location,l=e.history,s=Object(n.useRef)();if(!o.payload)return l.push("/"),null;s.current=o.payload.date;var u=s.current,m=function(e){c(function(e){return{type:"SET_LIST_SAGA",payload:e}}(e.target.innerHTML))};return r.a.createElement("div",{className:t.root},a.map((function(e,a){return r.a.createElement("div",{className:t.div,key:a},r.a.createElement(H.a,{variant:"h6",component:"h2"},e[0].role),r.a.createElement("div",null,e.map((function(e){return r.a.createElement(Ve.a,{color:"primary",key:e.name,label:e.name,variant:e.isChoosed?"default":"outlined",className:t.chip,clickable:!0,onClick:m})}))))})),r.a.createElement($e.a,{variant:"contained",color:"primary",className:t.submit,startIcon:r.a.createElement(Ot.a,null),onClick:function(){c({type:"SET_ARRANGEDATA",payload:{date:u,list:i}}),c(dt()),l.goBack()},disabled:!(i.length>0),ref:s},"\u5b8c\u6210".concat(new Date(u).getMonth()+1,"\u6708").concat(new Date(u).getDate(),"\u65e5\u7684\u6392\u73ed\uff1a")),r.a.createElement(_,{arrange:!0,clear:function(){c(dt())}}))})),Dt=a(660),Pt=a(662),Lt=a(595),_t=a(149),Ut=a.n(_t),Gt=a(661),Mt=a(150),Ft=a.n(Mt),Wt=Object(m.a)((function(e){return{container:{overflow:"hidden"},vedioBackground:{position:"fixed",right:0,bottom:0,minWidth:"100%",minHeight:"100%",width:"auto",height:"auto",zIndex:-10,backgroundRepeat:"no-repeat",backgroundSize:"cover"},background:{backgroundImage:"url(".concat(le[0],")"),position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:-10,backgroundRepeat:"no-repeat",backgroundSize:"cover"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},topBlock:{height:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},block:{height:"45px"},avatarContainer:{margin:e.spacing(1),width:e.spacing(10),height:e.spacing(10),backgroundColor:e.palette.secondary.main},avatar:{width:e.spacing(7),height:e.spacing(7)},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),height:"45px"},fix:{position:"absolute",textAlign:"center",bottom:0,right:0,left:0,color:"#fff"},notFix:{textAlign:"center",color:"#fff"},font:{color:"#fff"}}})),Ht=Object(St.a)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderTop:function(e){return"true"===e.top?"":"none"},borderBottom:function(e){return"ture"===e.top?"none":""},borderRadius:function(e){return"true"===e.top?"5px 5px 0 0":"0 0 5px 5px"},position:"relative",backgroundColor:e.palette.common.white,border:"1px solid #fff",fontSize:16,width:"100%",height:"24px",padding:"10px 12px"}}}))(Lt.a);function Bt(e){var t=e.height,a=e.scrollHeight,n=Wt();return r.a.createElement(H.a,{variant:"body2",color:"textSecondary",className:t===a?n.fix:n.notFix},"Copyright \xa9 ",r.a.createElement(Dt.a,{color:"inherit",href:"/logon"},"DevilDI")," ",(new Date).getFullYear(),".")}var zt=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.user,a=e.dispatch,c=Wt(),i=Object(l.f)(),o=Object(n.useState)(xe()),s=Object(u.a)(o,1)[0],m=Object(n.useState)(Se()),d=Object(u.a)(m,2),p=d[0],f=d[1],g=Object(n.useState)(""),h=Object(u.a)(g,2),v=h[0],b=h[1],E=Object(n.useState)(""),O=Object(u.a)(E,2),y=O[0],j=O[1];return Object(n.useEffect)((function(){f(Se())}),[p]),Object(n.useEffect)((function(){a({type:"GET_USE_SAGA"})}),[a]),Object(n.useEffect)((function(){t&&i.push("/")}),[t,i]),r.a.createElement(Gt.a,{component:"main",className:c.container,maxWidth:"xs"},r.a.createElement(Pt.a,null),r.a.createElement("div",{className:c.paper},r.a.createElement("div",{className:c.topBlock},r.a.createElement(et.a,{className:c.avatarContainer,src:de},r.a.createElement(Ut.a,{className:c.avatar})),r.a.createElement(H.a,{component:"h1",variant:"h3",className:c.font},"Sign In")),r.a.createElement("div",{className:c.form,noValidate:!0},r.a.createElement(Ht,{id:"\u7528\u6237\u540d",placeholder:"\u7528\u6237\u540d",type:"text",style:{width:"100%"},top:"true",onChange:function(e){b(e.target.value)}}),r.a.createElement(Ht,{id:"\u5bc6\u7801",placeholder:"\u5bc6\u7801",type:"password",style:{width:"100%"},onChange:function(e){j(e.target.value)}}),r.a.createElement("div",{className:c.block}),r.a.createElement($e.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:c.submit,startIcon:r.a.createElement(Ft.a,null),onClick:function(){return function(){if(!v.trim()||!y.trim())return alert("\u6709\u672a\u586b\u7684\u9879\u76ee\uff01");a({type:"LOGIN_SAGA",payload:{name:v.trim(),password:y.trim()}})}()}},"\u767b\u5f55"))),r.a.createElement(Bt,{height:s,scrollHeight:p}),r.a.createElement("video",{proload:"auto",autoPlay:!0,loop:!0,muted:!0,className:c.vedioBackground},r.a.createElement("source",{src:me,type:"video/mp4"})))})),Kt=Object(m.a)((function(e){return{container:{overflow:"hidden"},vedioBackground:{position:"fixed",right:0,bottom:0,minWidth:"100%",minHeight:"100%",width:"auto",height:"auto",zIndex:-10,backgroundRepeat:"no-repeat",backgroundSize:"cover"},background:{backgroundImage:"url(".concat(le[1],")"),position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:-10,backgroundRepeat:"no-repeat",backgroundSize:"cover"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},topBlock:{height:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},block:{height:"45px"},avatarContainer:{margin:e.spacing(1),width:e.spacing(10),height:e.spacing(10),backgroundColor:e.palette.secondary.main},avatar:{width:e.spacing(7),height:e.spacing(7)},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),height:"45px"},fix:{position:"absolute",textAlign:"center",bottom:0,right:0,left:0,color:"#fff"},notFix:{textAlign:"center",color:"#fff"},font:{color:"#fff"}}})),Vt=Object(St.a)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderTop:function(e){return"true"===e.top?"":"none"},borderBottom:function(e){return"ture"===e.top?"none":""},borderRadius:function(e){return function(e){return"top"===e.position?"5px 5px 0 0":"bottom"===e.position?"0 0 5px 5px":"0 0 0 0"}(e)},position:"relative",backgroundColor:e.palette.common.white,border:"1px solid #fff",fontSize:16,width:"100%",height:"24px",padding:"10px 12px"}}}))(Lt.a);function Yt(e){var t=e.height,a=e.scrollHeight,n=Kt();return r.a.createElement(H.a,{variant:"body2",color:"textSecondary",className:t===a?n.fix:n.notFix},"Copyright \xa9 ",r.a.createElement(Dt.a,{color:"inherit",href:"/signin"},"DevilDI")," ",(new Date).getFullYear(),".")}var Jt=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,a=Kt(),c=Object(n.useState)(xe()),i=Object(u.a)(c,1)[0],o=Object(n.useState)(Se()),l=Object(u.a)(o,2),s=l[0],m=l[1],d=Object(n.useState)(""),p=Object(u.a)(d,2),f=p[0],g=p[1],h=Object(n.useState)(""),v=Object(u.a)(h,2),b=v[0],E=v[1],O=Object(n.useState)(""),y=Object(u.a)(O,2),j=y[0],w=y[1];return Object(n.useEffect)((function(){console.log(xe(),Se()),m(Se())}),[s]),r.a.createElement(Gt.a,{component:"main",maxWidth:"xs",className:a.container},r.a.createElement(Pt.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement("div",{className:a.topBlock},r.a.createElement(et.a,{className:a.avatarContainer,src:de},r.a.createElement(Ut.a,{className:a.avatar})),r.a.createElement(H.a,{component:"h1",variant:"h3",className:a.font},"Log On")),r.a.createElement("div",{className:a.form,noValidate:!0},r.a.createElement(Vt,{id:"\u7528\u6237\u540d",placeholder:"\u7528\u6237\u540d",type:"text",style:{width:"100%"},position:"top",onChange:function(e){g(e.target.value)}}),r.a.createElement(Vt,{id:"\u5bc6\u7801",placeholder:"\u5bc6\u7801",type:"text",style:{width:"100%"},position:"middle",onChange:function(e){E(e.target.value)}}),r.a.createElement(Vt,{id:"\u6388\u6743\u7801",placeholder:"\u6388\u6743\u7801",type:"password",style:{width:"100%"},position:"bottom",onChange:function(e){w(e.target.value)}}),r.a.createElement("div",{className:a.block}),r.a.createElement($e.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,startIcon:r.a.createElement(Ft.a,null),onClick:function(){return function(){if(!(f.trim()&&b.trim()&&j.trim()))return alert("\u6709\u672a\u586b\u7684\u9879\u76ee\uff01");t({type:"REGISTER_SAGA_SAGA",payload:{name:f.trim(),password:b.trim(),auth:j.trim()}})}()}},"\u6ce8\u518c\u65b0\u7528\u6237"))),r.a.createElement(Yt,{height:i,scrollHeight:s}),r.a.createElement("video",{autoPlay:!0,loop:!0,muted:!0,className:a.vedioBackground},r.a.createElement("source",{src:me,type:"video/mp4"})))})),Xt=a(195),Qt=a.n(Xt),qt=a(655),Zt=Object(m.a)((function(e){return{root:{width:"100%"},container:{paddingTop:e.spacing(7)},block:{overFlow:"hidden",padding:1},circular:{width:"100%",position:"absolute",bottom:0,top:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}}));var $t=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.left,a=e.right,c=(e.loading,e.dispatch),i=e.history,o=Zt();Object(n.useEffect)((function(){return window.addEventListener("scroll",l),function(){window.removeEventListener("scroll",(function(){}))}}));var l=function(){Se(),we(),xe()};return Object(n.useEffect)((function(){c({type:"PHOTOS_SAGA",payload:1})}),[c]),r.a.createElement("div",{className:o.root},r.a.createElement(A,{title:"\u7167\u7247",history:i}),r.a.createElement("div",{className:o.container},r.a.createElement(nt.a,{container:!0},t.length>0&&a.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(nt.a,{item:!0,xs:6,className:o.block},t.map((function(e,t){return r.a.createElement(Qt.a,{key:t,height:e.height},r.a.createElement("img",{alt:"",src:e.src,width:"100%",height:e.height,onClick:function(){console.log(e)}}))}))),r.a.createElement(nt.a,{item:!0,xs:6,className:o.block},a.map((function(e,t){return r.a.createElement(Qt.a,{key:t,height:e.height},r.a.createElement("img",{alt:"",src:e.src,width:"100%",height:e.height,onClick:function(){console.log(e)}}))})))):r.a.createElement("div",{className:o.circular},r.a.createElement(qt.a,null)))))})),ea=a(27),ta=a(4),aa=a(659),na=a(656),ra=a(680),ca=a(294),ia=a.n(ca),oa=a(657),la=Object(m.a)((function(e){return{root:{padding:e.spacing(2,2,0,2),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},form:{margin:e.spacing(6,1,1,1),width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},form1:{width:"100%",display:"flex",flexDirection:"column"},chip:{display:"flex",flexDirection:"row",margin:e.spacing(1,0,1,0)},chipContainer:{margin:e.spacing(0,1,0,0)},submit:{width:"100%",margin:e.spacing(1),height:e.spacing(7)},textField:{width:"100%"},input:{width:"100%"}}})),sa=function(e){e.preventDefault()};var ua=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,a=e.history,c=la(),i=Object(n.useState)(""),o=Object(u.a)(i,2),l=o[0],s=o[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),p=d[0],f=d[1],g=Object(n.useState)(""),h=Object(u.a)(g,2),v=h[0],b=h[1],E=Object(n.useState)(""),O=Object(u.a)(E,2),y=O[0],j=O[1],x=Object(n.useState)(1),S=Object(u.a)(x,2),k=S[0],C=S[1],N=Object(n.useState)(""),I=Object(u.a)(N,2),T=I[0],R=I[1],D=Object(n.useState)(""),P=Object(u.a)(D,2),L=P[0],_=P[1],U=Object(n.useState)(""),G=Object(u.a)(U,2),M=G[0],F=G[1],W=Object(n.useState)(""),H=Object(u.a)(W,2),B=H[0],z=H[1],K=Object(n.useState)([]),V=Object(u.a)(K,2),Y=V[0],J=V[1],X=function(e,t){return t.indexOf(e)};return r.a.createElement("div",{className:c.root},r.a.createElement(A,{title:"\u5730\u56fe\u6570\u636e\u7f16\u8f91",history:a}),r.a.createElement(oa.a,{className:Object(ta.a)(c.form,c.textField),variant:"outlined"},r.a.createElement(ra.a,{htmlFor:"outlined-adornment-password"},"\u8f93\u5165\u884c\u7a0b\u7f16\u53f7"),r.a.createElement(na.a,{className:c.input,type:"text",onChange:function(e){s(e.target.value)},endAdornment:r.a.createElement(aa.a,{position:"end"},r.a.createElement(w.a,{"aria-label":"visibility",onClick:function(){if(!l)return alert("\u6709\u672a\u586b\u9879\uff01");t(gt(l))},onMouseDown:sa,edge:"end"},r.a.createElement(ia.a,null)))})),"\u6216\u8005",r.a.createElement("form",{className:c.form,noValidate:!0,autoComplete:"off"},r.a.createElement(bt.a,{className:c.submit,id:"number",label:"\u884c\u7a0b\u540d\u5b57",variant:"outlined",onChange:function(e){f(e.target.value)}}),r.a.createElement(bt.a,{className:c.submit,id:"name",label:"\u8bbe\u8ba1\u8005",variant:"outlined",onChange:function(e){b(e.target.value)}}),r.a.createElement(bt.a,{className:c.submit,id:"domestic",label:"\u56fd\u5185\u8fd8\u662f\u56fd\u5916\uff081/0\uff09",variant:"outlined",onChange:function(e){C(e.target.value)}}),r.a.createElement(bt.a,{className:c.submit,id:"sth",label:"\u884c\u7a0b\u7f16\u53f7",variant:"outlined",onChange:function(e){j(e.target.value)}}),r.a.createElement(bt.a,{className:c.submit,id:"city",label:"\u57ce\u5e02\uff08\u82f1\u6587 / \u5206\u5272\uff09",variant:"outlined",onChange:function(e){R(e.target.value)}}),r.a.createElement(bt.a,{className:c.submit,id:"country",label:"\u56fd\u5bb6\uff08\u82f1\u6587 / \u5206\u5272\uff09",variant:"outlined",onChange:function(e){_(e.target.value)}}),r.a.createElement("div",{className:c.form1},r.a.createElement(bt.a,{value:M,id:"tags",label:"\u6807\u7b7e\uff08\u82f1\u6587 / \u5206\u5272\uff09",variant:"outlined"}),r.a.createElement("div",{className:c.chip},Pe.map((function(e,t){return r.a.createElement("div",{key:t,className:c.chipContainer},r.a.createElement(Ve.a,{label:e,color:"primary",variant:Y.includes(t)?"default":"outlined",onClick:function(){return function(e,t){if(""===M)F(e);else if(function(e,t){return t.split("/").indexOf(e)}(e,M)>-1){var a=M.split("/"),n=a.indexOf(e);a.splice(n,1);var r=a.join("/");F(r)}else F("".concat(M,"/").concat(e));if(0===Y.length)J([t]);else if(X(t,Y)>-1){var c=X(t,Y),i=Object(ea.a)(Y);i.splice(c,1),J(i)}else J([].concat(Object(ea.a)(Y),[t]))}(e,t)}}))})))),r.a.createElement(bt.a,{className:c.submit,id:"cover",label:"\u5c01\u9762\u56fe",variant:"outlined",onChange:function(e){z(e.target.value)}}),r.a.createElement($e.a,{variant:"contained",color:"primary",className:c.submit,onClick:function(){if(!p||!v||!y||!k||!T||!L||!M)return alert("\u6709\u672a\u586b\u9879\uff01");var e={tripName:p.trim(),designer:v.trim(),uid:y,city:T,country:L,tags:M,domestic:parseInt(k),cover:B.trim()};t(gt(e))}},"\u65b0\u5efa\u884c\u7a0b")))})),ma=a(22),da=a(15),pa=a.n(da),fa=Object(m.a)((function(e){return{root:{padding:e.spacing(2,2,0,2),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},form:{margin:e.spacing(7,1,1,1),width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},submit:{width:"100%",margin:e.spacing(1),height:e.spacing(7)},textField:{width:"100%"},input:{width:"100%"}}}));var ga=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,a=e.item,c=e.history,i=e.location;Object(n.useEffect)((function(){}));var o=i.params,l=fa(),s=Object(n.useState)(!1),m=Object(u.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)(o?o.articleName:a),g=Object(u.a)(f,2),h=g[0],v=g[1],b=Object(n.useState)(o?o.picURL:a),E=Object(u.a)(b,2),O=E[0],y=E[1],j=Object(n.useState)(o?o.articleURL:a),w=Object(u.a)(j,2),x=w[0],S=w[1],k=Object(n.useState)(o&&void 0!==o.width?o.width:0),C=Object(u.a)(k,2),N=C[0],I=C[1],T=Object(n.useState)(o&&void 0!==o.height?o.height:0),R=Object(u.a)(T,2),D=R[0],P=R[1],L=function(){var e=Object(ie.a)(ce.a.mark((function e(){var t;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,pa.a.get("/api/trip/getImgWAH",{params:{url:O}});case 3:t=e.sent,I(t.data.width),P(t.data.height),p(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:l.root},r.a.createElement(A,{title:o?"\u7011\u5e03\u6d41\u9875\u9762\u6570\u636e\u4fee\u6539\uff1a":"\u7011\u5e03\u6d41\u9875\u9762\u6570\u636e\u65b0\u589e\uff1a",history:c}),r.a.createElement("form",{className:l.form,noValidate:!0,autoComplete:"off"},r.a.createElement(bt.a,{value:h,className:l.submit,id:"number",label:"\u6587\u7ae0\u540d\u5b57",variant:"outlined",onChange:function(e){v(e.target.value)}}),r.a.createElement(bt.a,{value:O,className:l.submit,id:"name",label:"\u56fe\u7247\u5730\u5740",variant:"outlined",onChange:function(e){y(e.target.value)}}),r.a.createElement(bt.a,{value:x,className:l.submit,id:"sth",label:"\u9875\u9762\u5730\u5740",variant:"outlined",onChange:function(e){S(e.target.value)}}),r.a.createElement(bt.a,{value:N,className:l.submit,id:"width",label:"\u56fe\u7247\u5bbd\u5ea6",variant:"outlined",type:"number",onChange:function(e){I(e.target.value)},InputProps:{endAdornment:r.a.createElement(aa.a,{position:"end"},r.a.createElement($e.a,{variant:"contained",color:"secondary",onClick:L,disabled:!O||d},d?"Loading":"\u83b7\u53d6\u5bbd\u5ea6"))}}),r.a.createElement(bt.a,{value:D,className:l.submit,id:"height",label:"\u56fe\u7247\u9ad8\u5ea6",type:"number",variant:"outlined",onChange:function(e){P(e.target.value)},InputProps:{endAdornment:r.a.createElement(aa.a,{position:"end"},r.a.createElement($e.a,{variant:"contained",color:"secondary",onClick:L,disabled:!O||d},d?"Loading":"\u83b7\u53d6\u9ad8\u5ea6"))}}),r.a.createElement($e.a,{variant:"contained",color:"primary",className:l.submit,onClick:function(){if(!h||!O||!x)return alert("\u6709\u672a\u586b\u9879\uff01");var e={articleName:h.trim(),picURL:O.trim(),articleURL:x,width:N,height:D};if(o){var n=Object(ma.a)({},o,{},e);console.log(n),pa.a.post("/api/trip/updateItem",n).then((function(e){200===e.status?alert("\u66f4\u6539\u6210\u529f\uff01"):alert("\u7cfb\u7edf\u51fa\u9519\uff0c\u8bf7\u91cd\u8bd5\uff01")})).catch((function(e){alert(e)}))}else t({type:"NEWITEM_SAGA",payload:e}),v(a),y(a),S(a),I(0),P(0)},disabled:!(O&&N>0&&D>0&&h&&x)},o?"\u4fdd\u5b58\u66f4\u6539":"\u63d0\u4ea4")))})),ha=Object(m.a)((function(e){return{root:{padding:e.spacing(2,2,0,2),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},form:{margin:e.spacing(7,1,1,1),width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},submit:{width:"100%",margin:e.spacing(1),height:e.spacing(7)},textField:{width:"100%"},input:{width:"100%"}}}));var va=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){e.dispatch,e.item;var t=e.history,a=e.location;Object(n.useEffect)((function(){}));var c=a.params,i=ha(),o=Object(n.useState)(!1),l=Object(u.a)(o,2),s=l[0],m=l[1],d=Object(n.useState)(c?c.tags:""),p=Object(u.a)(d,2),f=p[0],g=p[1],h=Object(n.useState)(c?c.picURL:""),v=Object(u.a)(h,2),b=v[0],E=v[1],O=Object(n.useState)(c?c.des:""),y=Object(u.a)(O,2),j=y[0],w=y[1],x=Object(n.useState)(c&&void 0!==c.width?c.width:0),S=Object(u.a)(x,2),k=S[0],C=S[1],N=Object(n.useState)(c&&void 0!==c.height?c.height:0),I=Object(u.a)(N,2),T=I[0],R=I[1],D=function(){var e=Object(ie.a)(ce.a.mark((function e(){var t;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,pa.a.get("/api/trip/getImgWAH",{params:{url:Oe(b)}});case 3:"error"===(t=e.sent).data?alert("\u83b7\u53d6\u56fe\u7247\u5bbd\u9ad8\u51fa\u9519\uff0c\u8bf7\u68c0\u67e5\u56fe\u7247URL\uff01"):(C(t.data.width),R(t.data.height)),m(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:i.root},r.a.createElement(A,{title:c?"\u7167\u7247\u4fee\u6539\uff1a":"\u7167\u7247\u6570\u636e\u65b0\u589e\uff1a",history:t}),r.a.createElement("form",{className:i.form,noValidate:!0,autoComplete:"off"},r.a.createElement(bt.a,{value:f,className:i.submit,id:"tags",label:"\u56fe\u7247\u6807\u7b7e\uff0c\u4ee5 | \u5206\u5272",variant:"outlined",onChange:function(e){g(e.target.value)}}),r.a.createElement(bt.a,{value:b,className:i.submit,id:"name",label:"\u56fe\u7247\u5730\u5740",variant:"outlined",onChange:function(e){E(e.target.value)}}),r.a.createElement(bt.a,{value:j,className:i.submit,id:"sth",label:"\u56fe\u7247\u63cf\u8ff0",variant:"outlined",onChange:function(e){w(e.target.value)}}),r.a.createElement(bt.a,{value:k,className:i.submit,id:"width",label:"\u56fe\u7247\u5bbd\u5ea6",variant:"outlined",type:"number",onChange:function(e){C(e.target.value)},InputProps:{endAdornment:r.a.createElement(aa.a,{position:"end"},r.a.createElement($e.a,{variant:"contained",color:"secondary",onClick:D,disabled:!b||s},s?"Loading":"\u83b7\u53d6\u5bbd\u5ea6"))}}),r.a.createElement(bt.a,{value:T,className:i.submit,id:"height",label:"\u56fe\u7247\u9ad8\u5ea6",type:"number",variant:"outlined",onChange:function(e){R(e.target.value)},InputProps:{endAdornment:r.a.createElement(aa.a,{position:"end"},r.a.createElement($e.a,{variant:"contained",color:"secondary",onClick:D,disabled:!b||s},s?"Loading":"\u83b7\u53d6\u9ad8\u5ea6"))}}),r.a.createElement($e.a,{variant:"contained",color:"primary",className:i.submit,onClick:function(){if(!b)return alert("\u8bf7\u586b\u5199\u56fe\u7247\u5730\u5740\uff01");if(0===k||0===T)return alert("\u8bf7\u586b\u5199\u56fe\u7247\u5bbd\u9ad8\uff01");var e={tags:f.trim(),picURL:Oe(b.trim()),des:j.trim(),width:k,height:T};if(c){var t=Object(ma.a)({},c,{},e);pa.a.post("/api/trip/updatePhoto",t).then((function(e){200===e.status?alert("\u66f4\u6539\u6210\u529f\uff01"):alert("\u7cfb\u7edf\u51fa\u9519\uff0c\u8bf7\u91cd\u8bd5\uff01")})).catch((function(e){alert(e)}))}else pa.a.post("/api/trip/photoInput",Object(ma.a)({},e)).then((function(e){e.data?(alert("\u63d0\u4ea4\u6210\u529f\uff01"),g(""),E(""),w(""),C(0),R(0)):alert("\u56fe\u7247\u63d0\u4ea4\u51fa\u9519\uff01")})).catch((function(e){alert("\u56fe\u7247\u63d0\u4ea4\u51fa\u9519\uff01")}))},disabled:!(b&&k>0&&T>0)},c?"\u4fdd\u5b58\u66f4\u6539":"\u63d0\u4ea4")))})),ba=a(295),Ea=a.n(ba),Oa=Object(m.a)((function(e){return{listContainer:{margin:e.spacing(8,0,2,0),display:"flex",flexDirection:"row",flexWrap:"wrap"},btn:{display:"flex",alignItems:"center",justifyContent:"space-around",padding:e.spacing(0,0,1,0)},imgContainer:{margin:e.spacing(1,0,0,1),position:"relative",width:"200px",height:"200px",overflow:"hidden",backgroundColor:"#f0f0f0"},img:{display:"block",maxHeight:"100%",height:"auto"},img2:{display:"block",maxWidth:"100%",width:"auto"},dele:{position:"absolute",right:0,top:0,color:"white"}}}));var ya=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,a=(e.item,e.history),c=e.pageIndex,i=Oa(),o=Object(n.useState)(null),l=Object(u.a)(o,2),s=l[0],m=l[1],d=Object(n.useState)([]),p=Object(u.a)(d,2),f=p[0],g=p[1];Object(n.useEffect)((function(){pa.a.get("/api/trip/getPhotos",{params:{page:c}}).then((function(e){g(e.data.items),m(e.data.total)})).catch((function(e){return alert(e)}))}),[c]);var h=function(){var e=Object(ie.a)(ce.a.mark((function e(){var a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa.a.get("/api/trip/getPhotos",{params:{page:c-1}});case 2:a=e.sent,g(a.data.items),t(lt(c-1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(ie.a)(ce.a.mark((function e(){var a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa.a.get("/api/trip/getPhotos",{params:{page:c+1}});case 2:a=e.sent,g(a.data.items),t(lt(c+1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(ie.a)(ce.a.mark((function e(t,a,n){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),e.next=3,pa.a.post("/api/trip/deletePhoto",{id:a._id});case 3:e.sent.data?(alert("\u5df2\u5220\u9664\uff01"),f.splice(t,1),g(Object(ea.a)(f))):alert("\u7cfb\u7edf\u9519\u8bef\uff01");case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(A,{title:"\u5168\u90e8\u56fe\u7247\uff1a",history:a}),r.a.createElement("div",{className:i.listContainer},f&&f.length>0?f.map((function(e,t){return r.a.createElement("div",{key:t,className:i.imgContainer,onClick:function(){return function(e){a.push({pathname:"/photosInput",params:e})}(e)}},r.a.createElement("img",{alt:"",className:e.width>e.height?i.img:i.img2,src:e.picURL}),r.a.createElement("div",{className:i.dele,onClick:function(a){return b(t,e,a)}},r.a.createElement(Ea.a,null)))})):null),r.a.createElement("div",{className:i.btn},f&&f.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{variant:"contained",color:"primary",disabled:1===c,onClick:h},"\u4e0a\u4e00\u9875"),r.a.createElement($e.a,{variant:"contained",color:"primary",disabled:c===s,onClick:v},"\u4e0b\u4e00\u9875")):null))})),ja=a(663),wa=a(664),xa=Object(m.a)((function(e){return{container:{overflow:"hidden"},listContainer:{margin:e.spacing(8,0,1,0)},btn:{display:"flex",alignItems:"center",justifyContent:"space-around",margin:e.spacing(0,0,1,0)}}}));var Sa=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,a=(e.item,e.history),c=e.pageIndex,i=xa(),o=Object(n.useState)(null),l=Object(u.a)(o,2),s=l[0],m=l[1],d=Object(n.useState)([]),p=Object(u.a)(d,2),f=p[0],g=p[1];Object(n.useEffect)((function(){pa.a.get("/api/trip/getStoryByPage",{params:{page:c}}).then((function(e){g(e.data.items),m(e.data.total)})).catch((function(e){return alert(e)}))}),[c]);var h=function(){var e=Object(ie.a)(ce.a.mark((function e(){var a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa.a.get("/api/trip/getStoryByPage",{params:{page:c-1}});case 2:a=e.sent,g(a.data.items),t(lt(c-1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(ie.a)(ce.a.mark((function e(){var a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa.a.get("/api/trip/getStoryByPage",{params:{page:c+1}});case 2:a=e.sent,g(a.data.items),t(lt(c+1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:i.container},r.a.createElement(A,{title:"\u5168\u90e8\u7011\u5e03\u6d41\u9875\u9762\u6570\u636e\uff1a",history:a}),r.a.createElement("div",{className:i.listContainer},f&&f.length>0?f.map((function(e,t){return r.a.createElement(ja.a,{button:!0,key:t,onClick:function(){return function(e){a.push({pathname:"/story",params:e})}(e)}},r.a.createElement(wa.a,{primary:e.articleName}))})):null),r.a.createElement("div",{className:i.btn},f&&f.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{variant:"contained",color:"primary",disabled:1===c,onClick:h},"\u4e0a\u4e00\u9875"),r.a.createElement($e.a,{variant:"contained",color:"primary",disabled:c===s,onClick:v},"\u4e0b\u4e00\u9875")):null))})),ka=a(658),Ca=a(665),Na=Object(m.a)((function(e){return{listContainer:{padding:e.spacing(8,0,1,0)},btn:{display:"flex",alignItems:"center",justifyContent:"space-around",margin:e.spacing(0,0,1,0)}}}));var Aa=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,a=(e.item,e.history),c=e.pageIndex,i=Na(),o=Object(n.useState)(null),l=Object(u.a)(o,2),s=l[0],m=l[1],d=Object(n.useState)([]),p=Object(u.a)(d,2),f=p[0],g=p[1];Object(n.useEffect)((function(){pa.a.get("/api/trip/getAllTripByPage",{params:{page:c}}).then((function(e){g(e.data.items),m(e.data.total)})).catch((function(e){return alert(e)}))}),[c]);var h=function(){var e=Object(ie.a)(ce.a.mark((function e(){var a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa.a.get("/api/trip/getAllTripByPage",{params:{page:c-1}});case 2:a=e.sent,g(a.data.items),t(lt(c-1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(ie.a)(ce.a.mark((function e(){var a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa.a.get("/api/trip/getAllTripByPage",{params:{page:c+1}});case 2:a=e.sent,g(a.data.items),t(lt(c+1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(A,{title:"\u5168\u90e8\u884c\u7a0b\u6570\u636e\uff1a",history:a}),r.a.createElement(ka.a,{className:i.listContainer},f&&f.length>0?f.map((function(e,t){return r.a.createElement(ja.a,{button:!0,key:t,onClick:function(){return function(e){a.push({pathname:"/edit",params:e})}(e)}},r.a.createElement(wa.a,{primary:"".concat(e.tripName," | ").concat(e.detail.length,"\u5929 | ").concat(e.city)}),r.a.createElement(Ca.a,null,r.a.createElement($e.a,{edge:"end","aria-label":"actions",onClick:function(t){t.stopPropagation(),pa.a.post("/api/trip/deleteItem",{uid:e.uid}).then((function(t){t.data?(alert("\u5220\u9664\u6210\u529f"),g(f.filter((function(t){return t.uid!==e.uid})))):alert("\u5220\u9664\u5931\u8d25")}))}},"\u5220\u9664")))})):null),r.a.createElement("div",{className:i.btn},f&&f.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{variant:"contained",color:"primary",disabled:1===c,onClick:h},"\u4e0a\u4e00\u9875"),r.a.createElement($e.a,{variant:"contained",color:"primary",disabled:c===s,onClick:v},"\u4e0b\u4e00\u9875")):null))})),Ia=Object(m.a)((function(e){return{root:{padding:e.spacing(2,2,0,2),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},div:{margin:e.spacing(5,1,1,1)},div1:{width:"100%",height:e.spacing(6),display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}}}));var Ta=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.history,a=e.dispatch,c=(e.nextstickerUsersIncreased,r.a.useState(0)),i=Object(u.a)(c,2),o=i[0],l=i[1],s=r.a.useState([]),m=Object(u.a)(s,2),d=m[0],p=m[1],f=r.a.useState(!1);Object(n.useEffect)((function(){a({type:"SET_NEXTSTICKERUSERSINCREASED",payload:0})}),[a]),Object(n.useEffect)((function(){v()}),[]),Object(n.useEffect)((function(){return window.addEventListener("scroll",g),function(){window.removeEventListener("scroll",(function(){}))}}));var g=function(){!(Se()-we()-xe()<=20)||f||d.length},h=Ia(),v=function(){pa.a.get("/api/users/getClient").then((function(e){200===e.status&&(l(e.data.length),p(e.data))})).catch((function(e){alert(e)}))};return r.a.createElement("div",{className:h.root},r.a.createElement(A,{title:"NextSticker\u7684\u603b\u7528\u6237\u4e3a ".concat(o),history:t}),r.a.createElement("div",{className:h.div}),d.length>0?r.a.createElement(r.a.Fragment,null,d.map((function(e,t){return r.a.createElement("div",{className:h.div1,key:t},r.a.createElement("div",null,"\u76ee\u7684\u5730\uff1a",e.destination),r.a.createElement("div",null,"\u5fae\u4fe1\u53f7\uff1a",e.wechat))}))):r.a.createElement("div",{className:h.div2},"\u6682\u65f6\u65e0\u7528\u6237\uff01"))})),Ra=a(10),Da=a(666),Pa=a(681),La=a(676),_a=a(153),Ua=a.n(_a),Ga=a(296),Ma=a.n(Ga),Fa=a(668),Wa=a(297),Ha=a.n(Wa),Ba=a(151),za=a.n(Ba),Ka=(a(140),a(682)),Va=a(152),Ya=a.n(Va),Ja=a(652),Xa=a(667),Qa=a(108);var qa=function(e){var t=e.totalData,a=e.data,c=e.removeItem,i=e.AddOneItem,o=e.changePlan,l=e.rePlaceOneItem,s=Object(n.useState)(null),m=Object(u.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)([]),g=Object(u.a)(f,2),h=g[0],v=g[1],b=Object(n.useState)([]),E=Object(u.a)(b,2),O=E[0],y=E[1],j=Object(n.useState)(""),x=Object(u.a)(j,2),S=x[0],k=x[1],C=Object(n.useState)(null),N=Object(u.a)(C,2),A=N[0],I=N[1],T=Object(n.useState)([]),R=Object(u.a)(T,2),D=R[0],P=R[1],L=Object(n.useState)(!1),_=Object(u.a)(L,2),U=_[0],G=_[1],M=Object(n.useState)(!1),F=Object(u.a)(M,2),W=F[0],H=F[1],B=Object(n.useState)(new Re),z=Object(u.a)(B,2),K=z[0],V=z[1],Y=Object(n.useState)(new Re),J=Object(u.a)(Y,2),X=J[0],Q=J[1],q=Object(n.useState)(0),Z=Object(u.a)(q,2),$=Z[0],ee=Z[1],te=Object(n.useState)(!1),ae=Object(u.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(!1),ie=Object(u.a)(ce,2),oe=ie[0],le=ie[1],se=Object(n.useState)(null),me=Object(u.a)(se,2),de=me[0],pe=me[1],fe=Object(n.useState)([]),ge=Object(u.a)(fe,2),he=ge[0],ve=ge[1],be=Object(n.useState)(!1),Ee=Object(u.a)(be,2),Oe=Ee[0],ye=(Ee[1],Object(n.useState)(null)),je=Object(u.a)(ye,2),we=je[0],Se=je[1],ke=Object(n.useState)(!1),Ce=Object(u.a)(ke,2),Ne=Ce[0],Ae=Ce[1],Ie=Object(n.useState)(!1),Te=Object(u.a)(Ie,2),Pe=Te[0],Le=Te[1],_e=Object(n.useState)(!1),Ue=Object(u.a)(_e,2),Ge=Ue[0],Me=Ue[1],Fe=Object(n.useRef)(null),We=Object(n.useRef)(null);Object(n.useEffect)((function(){V(new Re(a[0].nameOfScence,a[0].longitude,a[0].latitude,a[0].des,a[0].picURL))}),[a]),Object(n.useEffect)((function(){console.log("\u5730\u56fe\u5f00\u59cb\u6e32\u67d3\uff01",t),za.a.load({key:ue,version:"2.0",plugins:["AMap.Scale","AMap.Geolocation","AMap.AutoComplete","AMap.PlaceSearch"]}).then((function(e){var t=new e.Map("container",{viewMode:"3D",zoom:15,center:Ke(a)});t.addControl(new e.Scale),t.addControl(new e.Geolocation);var n=[],r=[],i=[];a&&a.length>0&&(a.forEach((function(a,o){i.push([parseFloat(a.longitude),parseFloat(a.latitude)]);var l=ze(e,a.nameOfScence,a.des,a.picURL,c,Ye,Xe,o,Be);r.push(l);var s=He(e,parseFloat(a.longitude),parseFloat(a.latitude),a.nameOfScence,o);s.on("click",(function(e){return qe(e,l,t)})),n.push(s)})),t.add(n),r[0].open(t,i[0]),v(n),y(r)),I(e),p(t)})).catch((function(e){console.log(e)}))}),[t,a,null===a||void 0===a?void 0:a.length,c]);var He=function(e,t,a,n,r){return new e.Marker({position:new e.LngLat(t,a),title:n,extData:r})},Be=function(e){G(!0)},ze=function(e,t,a,n,r,c,i,o,l){return new e.InfoWindow({isCustom:!0,content:Ve(t,a,n,r,c,i,o,l),offset:new e.Pixel(0,-30)})},Ke=function(e){return e&&e.length>0?[parseFloat(e[0].longitude),parseFloat(e[0].latitude)]:[116.39,39.9]},Ve=function(e,t,n,r,c,i,o,l){var s=document.createElement("div");s.className="windowContainer";var u=document.createElement("div");u.className="title",u.innerHTML=e,s.appendChild(u);var m=document.createElement("div");if(m.className="des",m.innerHTML=t,t&&s.appendChild(m),n){var d=document.createElement("div");d.className="imgContainer";var p=document.createElement("img");p.className="img",p.src=n,p.onclick=function(){return l(o)},d.appendChild(p),s.appendChild(d)}var f=document.createElement("div");f.className="btn",f.innerHTML="\u5220\u9664\u6b64\u70b9",f.onclick=function(){return r(o)};var g=document.createElement("div");g.className="rePlan",g.innerHTML="\u666f\u70b9\u6392\u5e8f",g.onclick=function(){return i(o)};var h=document.createElement("div");return h.className="btn",h.innerHTML="\u6dfb\u52a0\u5230\u5f53\u65e5\u884c\u7a0b",h.onclick=c,Ze(e,a)?(s.appendChild(f),s.appendChild(g)):s.appendChild(h),s},Ye=function(){console.log("\u6dfb\u52a0\u8be6\u7ec6\u6570\u636e\u5f39\u7a97\uff1a"),console.log(Qe()),K.nameOfScence=Qe().name,K.longitude=Qe().lng,K.latitude=Qe().lat,K.des="",K.picURL="",G(!0)},Xe=function(e){H(!0)},Qe=function(){var e={},t=d.getAllOverlays("marker");return a.forEach((function(e){for(var a=0;a<t.length;a++)t[a].getTitle()===e.nameOfScence&&t.splice(a,1)})),e.name=t[0].getTitle(),e.lng=t[0].getPosition().lng,e.lat=t[0].getPosition().lat,e},qe=function(e,t,n){try{var r=a.findIndex((function(t){return t.nameOfScence===e.target.getTitle()}));if(-1!==r){V(new Re(a[r].nameOfScence,a[r].longitude,a[r].latitude,a[r].des,a[r].picURL));var c=e.target.getPosition();t.open(n,c),n.panTo(c)}}catch(i){console.error("Error in openOrcloseWindow:",i)}},Ze=function(e,t){for(var a=!1,n=0;n<t.length;n++)if(t[n].nameOfScence===e){a=!0;break}return a},et=function(){G(!1)},tt=function(e,t){K[t]="category"===t?parseInt(e):e,K[t]=e,V(Object(ma.a)({},K))},at=function(e){var a=$+1;$<t.length&&ee(a);var n=e.removedIndex,r=e.addedIndex;if((null!==n||null!==r)&&null!==r){console.log("\u7b2c".concat($+1,"\u5929\u7684\u7b2c").concat(r+1,"\u5904\uff01"));var c=JSON.parse(JSON.stringify(t)),i=function(e,t){for(var a=[],n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)if(e[n][r].nameOfScence===t){a.push(n),a.push(r);break}return a}(c,X.nameOfScence);c[i[0]].splice(i[1],1),c[$].splice(r,0,X),o(c),Q(new Re)}},nt=function(e){"des"===e?(re(!1),Se(null),pe(null)):(le(!1),Se(null),ve([]))},rt=function(e){console.log(e),"des"===e?(Le(!0),pa.a.get("/api/chat/getDes?chat=".concat(K.nameOfScence)).then((function(t){tt(t.data,e),Le(!1)})).catch((function(e){console.log(e),Le(!1)}))):(Ae(!0),pa.a.get("/api/trip/getBingImg?point=".concat(K.nameOfScence)).then((function(t){tt(t.data,e),Ae(!1)})).catch((function(e){console.log(e),Ae(!1)})))};return r.a.createElement("div",{className:"outerContainer"},r.a.createElement("div",{id:"container",className:"map",style:{height:"".concat(xe(),"px")}}),r.a.createElement("div",{className:"textFieldContainer"},r.a.createElement(oa.a,{variant:"outlined"},r.a.createElement(ra.a,{htmlFor:"outlined-adornment-password"},"\u8bf7\u8f93\u5165\u5173\u952e\u5b57"),r.a.createElement(Ka.a,{id:"outlined-adornment-password",type:"text",value:S,onChange:function(e){k(e.target.value)},endAdornment:Ge?r.a.createElement(aa.a,{position:"end"},r.a.createElement(w.a,{"aria-label":"toggle password visibility",edge:"end"},r.a.createElement(qt.a,{size:20}))):D&&D.length>0?r.a.createElement(aa.a,{position:"end"},r.a.createElement(w.a,{"aria-label":"toggle password visibility",onClick:function(){if(P([]),k(""),a.length!==d.getAllOverlays("marker").length){var e=d.getAllOverlays("marker");a.forEach((function(t){console.log(t.nameOfScence);for(var a=0;a<e.length;a++)e[a].getTitle()===t.nameOfScence&&e.splice(a,1)})),e[0].remove(),d.clearInfoWindow()}},edge:"end"},r.a.createElement(Je.a,null))):r.a.createElement(aa.a,{position:"end"},r.a.createElement(w.a,{"aria-label":"toggle password visibility",onClick:function(){(Me(!0),S.trim()&&""!==S.trim())?(new A.PlaceSearch).search(S.trim(),(function(e,t){"OK"===t.info?(P(t.poiList.pois),Me(!1)):(alert("\u65e0\u641c\u7d22\u7ed3\u679c\uff0c\u8bf7\u7cbe\u786e\u8f93\u5165\u5173\u952e\u5b57\uff01"),Me(!1))})):(alert("\u65e0\u641c\u7d22\u5185\u5bb9\uff01"),Me(!1))},edge:"end"},r.a.createElement(Ya.a,null))),label:"Password"})),r.a.createElement("div",{className:"resultsContainer"},D&&D.length>0?r.a.createElement(ka.a,null,D.map((function(e,t){return r.a.createElement("div",{key:t,onClick:function(){!function(e){if(console.log("\u6dfb\u52a0\u9879\u76ee",e),a.length!==d.getAllOverlays("marker").length){var t=d.getAllOverlays("marker");a.forEach((function(e){for(var a=0;a<t.length;a++)t[a].getTitle()===e.nameOfScence&&t.splice(a,1)})),t[0].remove()}var n=ze(A,e.name,null,null,null,Ye,Xe,d.getAllOverlays("marker").length+1),r=He(A,e.location.lng,e.location.lat,e.name,d.getAllOverlays("marker").length+1);r.on("click",(function(e){return qe(e,n,d)})),d.add(r),n.open(d,[e.location.lng,e.location.lat]),d.panTo([e.location.lng,e.location.lat])}(e)}},r.a.createElement(ja.a,null,r.a.createElement(wa.a,{primary:e.name})))}))):null)),r.a.createElement("div",{className:"listContainer",style:{left:document.body.clientWidth<xe()?"20px":"220px",maxHeight:"".concat(xe()-100,"px"),overflowY:"auto",position:"absolute"}},a&&a.length>0?r.a.createElement(ka.a,null,a.map((function(e,t){return r.a.createElement("div",{key:e.nameOfScence,onClick:function(){!function(e){O[e].getIsOpen()||O[e].open(d,h[e].getPosition()),V(new Re(a[e].nameOfScence,a[e].longitude,a[e].latitude,a[e].des,a[e].picURL)),d.panTo(h[e].getPosition())}(t)}},r.a.createElement(ja.a,null,r.a.createElement(wa.a,{primary:e.nameOfScence})),r.a.createElement(Da.a,null))}))):null),r.a.createElement(Ja.a,{open:U,onClose:et},r.a.createElement(Xa.a,null,"\u8bf7\u5b8c\u5584\u5982\u4e0b\u4fe1\u606f\uff1a"),r.a.createElement("div",{className:"textContainer"},r.a.createElement(bt.a,{label:"nameOfScence",value:K.nameOfScence,onChange:function(e){tt(e.target.value,"nameOfScence")}}),r.a.createElement("div",null,r.a.createElement(bt.a,{label:"longitude",value:K.longitude,onChange:function(e){tt(e.target.value,"longitude")}}),r.a.createElement(bt.a,{label:"latitude",value:K.latitude,onChange:function(e){tt(e.target.value,"latitude")}})),r.a.createElement(bt.a,{inputRef:Fe,label:"des",multiline:!0,value:K.des,onChange:function(e){tt(e.target.value,"des")},InputProps:{endAdornment:r.a.createElement(aa.a,{position:"end"},r.a.createElement($e.a,{variant:"text",onClick:function(){return rt("des")},size:"small"},Pe?"\u6b63\u5728\u83b7\u53d6\u63cf\u8ff0\u4e2d":"\u83b7\u53d6\u63cf\u8ff0"))}}),r.a.createElement(bt.a,{inputRef:We,multiline:!0,label:"picURL",value:K.picURL,onChange:function(e){tt(e.target.value,"picURL")},InputProps:{endAdornment:r.a.createElement(aa.a,{position:"end"},r.a.createElement($e.a,{variant:"text",onClick:function(){return rt("picURL")},size:"small"},Ne?"\u6b63\u5728\u83b7\u53d6\u56fe\u7247\u4e2d":"\u83b7\u53d6\u56fe\u7247"))}}),r.a.createElement(bt.a,{label:"pointOrNot",value:K.pointOrNot,onChange:function(e){tt(e.target.value,"pointOrNot")}}),r.a.createElement(bt.a,{label:"category",value:K.category,onChange:function(e){tt(e.target.value,"category")}}),r.a.createElement(bt.a,{label:"contructor",value:K.contructor,onChange:function(e){tt(e.target.value,"contructor")}}),r.a.createElement("div",{className:"btnContainer"},r.a.createElement($e.a,{color:"primary",variant:"contained",onClick:function(){if(""===K.des||""===K.picURL)return alert("\u6709\u672a\u586b\u9879\u76ee\uff01");var e=a.findIndex((function(e){return e.nameOfScence===K.nameOfScence}));if(-1===e)i(Object(ma.a)({},K)),et(),V(new Re(a[0].nameOfScence,a[0].longitude,a[0].latitude,a[0].des,a[0].picURL)),P([]),k("");else{l(e,Object(ma.a)({},K)),et();a.with(e,Object(ma.a)({},K));V(new Re(a[e].nameOfScence,a[e].longitude,a[e].latitude,a[e].des,a[e].picURL))}}},"\u4fdd\u5b58\u5230\u5f53\u65e5\u884c\u7a0b")))),r.a.createElement(Ja.a,{open:W,onClose:function(){H(!1)}},r.a.createElement(Xa.a,null,"\u8bf7\u62d6\u52a8\u6392\u5e8f\uff1a"),r.a.createElement("div",{className:"replanContainer2"},t.map((function(e,a){return r.a.createElement("div",{key:a,className:"replanContainer1"},r.a.createElement("div",{className:"titlereplan"},"\u7b2c".concat(a+1,"\u5929")),r.a.createElement(Qa.Container,{orientation:"horizontal",className:"replanContainer",style:De,groupName:"1",getChildPayload:function(e){return function(e,a){console.log("\u5c06\u7b2c".concat(a+1,"\u5929\u7684\u7b2c").concat(e+1,"\u4e2a\u666f\u70b9\u79fb\u52a8\u5230\uff1a"));var n=t[a][e];Object.keys(n).forEach((function(e){X[e]=n[e]})),0!==ee&&ee(0)}(e,a)},onDrop:at},e.map((function(e,t){return r.a.createElement(Qa.Draggable,{key:e.nameOfScence,style:{height:"30px"}},r.a.createElement("div",{className:"itemContainer"},e.nameOfScence))}))))})))),r.a.createElement(Ja.a,{open:ne,onClose:function(){return nt("des")}},r.a.createElement("div",{className:"inFoContainer"},r.a.createElement("div",null,Oe?"\u666f\u70b9\u7b80\u4ecb\u83b7\u53d6\u4e2d...":null),r.a.createElement(bt.a,{label:"des",multiline:!0,fullWidth:!0,value:K.des,onChange:function(e){tt(e.target.value,"des")}}),r.a.createElement("div",{onClick:function(){tt(de,"des")}},null!==de?de:null),r.a.createElement("div",null,null!==de?"\u6570\u636e\u6765\u81ea \u767e\u5ea6\u767e\u79d1":null),r.a.createElement("div",null,null!==we?"\u6570\u636e\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u81ea\u5df1\u586b\u5199\uff01":null),r.a.createElement("div",{className:"btnContainer"},r.a.createElement($e.a,{color:"secondary",variant:"contained",onClick:function(){return nt("des")}},"\u8fd4\u56de"),r.a.createElement($e.a,{color:"primary",variant:"contained",onClick:function(){return nt("des")}},"\u4fdd\u5b58")))),r.a.createElement(Ja.a,{open:oe,onClose:function(){return nt("picURL")}},r.a.createElement("div",{className:"inFoContainer"},r.a.createElement("div",null,Oe?"\u9884\u89c8\u56fe\u7247\u83b7\u53d6\u4e2d...":null),r.a.createElement(bt.a,{label:"picURL",multiline:!0,fullWidth:!0,value:K.picURL,onChange:function(e){tt(e.target.value,"picURL")}}),r.a.createElement("div",{className:"googleImgsContainer"},he.length>0?he.map((function(e,t){return r.a.createElement("div",{className:"googleImgsBox",onClick:function(){tt(e,"picURL")},key:t},r.a.createElement("img",{className:"googleImgBox",src:e,alt:""}))})):r.a.createElement("div",null)),r.a.createElement("div",null,null!==he&&he.length>0?"\u9884\u89c8\u56fe\u7247\u6570\u636e\u6765\u81ea Bing":null),r.a.createElement("div",null,null!==we?"\u9884\u89c8\u56fe\u7247\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u81ea\u5df1\u586b\u5199\u56fe\u7247\u94fe\u63a5\uff01":null),r.a.createElement("div",{className:"btnContainer"},r.a.createElement($e.a,{color:"secondary",variant:"contained",onClick:function(){return nt("picURL")}},"\u8fd4\u56de"),r.a.createElement($e.a,{color:"primary",variant:"contained",onClick:function(){return nt("picURL")}},"\u4fdd\u5b58")))))},Za=a(36),$a=a(50),en=a(51),tn=a(52),an=a(49);var nn=Object(an.GoogleApiWrapper)({apiKey:se})((function(e){var t=e.google,a=e.totalData,c=e.data,i=e.removeItem,o=e.AddOneItem,l=e.changePlan,s=e.rePlaceOneItem,m=Object(n.useState)(null),d=Object(u.a)(m,2),p=d[0],f=d[1],g=Object(n.useState)(""),h=Object(u.a)(g,2),v=h[0],b=h[1],E=Object(n.useState)([]),O=Object(u.a)(E,2),y=O[0],j=O[1],x=Object(n.useState)(!1),S=Object(u.a)(x,2),k=S[0],C=S[1],N=Object(n.useState)(!1),A=Object(u.a)(N,2),I=A[0],T=A[1],R=Object(n.useState)(new Re),D=Object(u.a)(R,2),P=D[0],L=D[1],_=Object(n.useState)(new Re),U=Object(u.a)(_,2),G=U[0],M=U[1],F=Object(n.useState)(0),W=Object(u.a)(F,2),H=W[0],B=W[1],z=Object(n.useState)(null),K=Object(u.a)(z,2),V=K[0],Y=K[1],J=Object(n.useState)(null),X=Object(u.a)(J,2),Q=X[0],q=X[1],Z=Object(n.useState)(""),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(""),ne=Object(u.a)(ae,2),re=ne[0],ce=ne[1],ie=Object(n.useState)(""),le=Object(u.a)(ie,2),se=le[0],ue=le[1],me=Object(n.useState)(!1),de=Object(u.a)(me,2),pe=de[0],fe=de[1],ge=Object(n.useState)(null),he=Object(u.a)(ge,2),ve=he[0],be=he[1],Ee=Object(n.useState)(null),Oe=Object(u.a)(Ee,2),ye=Oe[0],je=Oe[1],we=Object(n.useState)(!1),Se=Object(u.a)(we,2),ke=Se[0],Ce=Se[1],Ne=Object(n.useState)(!1),Ae=Object(u.a)(Ne,2),Ie=Ae[0],Te=Ae[1],Pe=Object(n.useState)(!1),Le=Object(u.a)(Pe,2),_e=Le[0],Ue=Le[1],Ge=Object(n.useRef)([]);Object(n.useEffect)((function(){c&&c.length>0&&L(new Re(c[0].nameOfScence,c[0].longitude,c[0].latitude,c[0].des,c[0].picURL))}),[c]),Object(n.useEffect)((function(){console.log("google\u5730\u56fe\u5f00\u59cb\u6e32\u67d3\uff01",a,c),Ge.current=[],c&&c.length>0&&Me(c[0]),pe&&fe(!1)}),[a,c,null===c||void 0===c?void 0:c.length,i]);var Me=function(e){var t={};t.lat=parseFloat(e.latitude),t.lng=parseFloat(e.longitude),q(t)},Fe=function(e,t,a){var n=document.createElement("div"),r=document.createElement("div");r.innerHTML=e,n.appendChild(r);var c=document.createElement("div");return c.innerHTML="\u6dfb\u52a0\u5230\u5f53\u65e5\u884c\u7a0b",c.onclick=function(){return t(a)},n.appendChild(c),n},We=function(e){P.nameOfScence=e.name,P.longitude=e.geometry.location.lng(),P.latitude=e.geometry.location.lat(),P.des="",P.picURL="",C(!0)},He=function(){console.log("\u6392\u5e8f"),T(!0),pe&&(Y(null),fe(!1))},Be=function(){C(!1)},ze=function(e,t){P[t]="category"===t?parseInt(e):e,P[t]=e,L(Object(ma.a)({},P))},Ke=function(e){var t=H+1;H<a.length&&B(t);var n=e.removedIndex,r=e.addedIndex;if((null!==n||null!==r)&&null!==r){console.log("\u7b2c".concat(H+1,"\u5929\u7684\u7b2c").concat(r+1,"\u5904\uff01"));var c=JSON.parse(JSON.stringify(a)),i=function(e,t){for(var a=[],n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)if(e[n][r].nameOfScence===t){a.push(n),a.push(r);break}return a}(c,G.nameOfScence);c[i[0]].splice(i[1],1),c[H].splice(r,0,G),l(c),M(new Re)}},Ve=function(e,t){console.log("\u5730\u56fe\u5b8c\u6210\u521d\u59cb\u5316\uff1a",e);var a=new e.google.maps.places.PlacesService(t);be(a),f(t),c&&c.length>0&&(te(c[0].nameOfScence),ce(c[0].des),ue(c[0].picURL),q({lat:parseFloat(c[0].latitude),lng:parseFloat(c[0].longitude)}),setTimeout((function(){Ge.current[0]&&(Y(Ge.current[0].marker),fe(!0))}),1e3))},Ye=function(e,t){console.log(t);var a=c.filter((function(t){return t.nameOfScence===e.title}));L(new Re(a[0].nameOfScence,a[0].longitude,a[0].latitude,a[0].des,a[0].picURL)),a[0].nameOfScence!==ee?(te(a[0].nameOfScence),ce(a[0].des),ue(a[0].picURL),q(e.position),Y(t),fe(!0)):(te(""),ce(""),ue(""),Y(null),fe(!1))},Xe=function(e){console.log("\u70b9\u51fb\u5730\u56fe",e)},Qe=function(e){pe&&(te(""),ce(""),ue(""),Y(null),fe(!1));for(var t=0;t<c.length;t++)c[t].nameOfScence===e&&i(t)},qe=function(e){console.log(e),"des"===e?(Te(!0),pa.a.get("/api/chat/getDes?chat=".concat(P.nameOfScence)).then((function(t){ze(t.data,e),Te(!1)})).catch((function(e){console.log(e),Te(!1)}))):(Ce(!0),pa.a.get("/api/trip/getBingImg?point=".concat(P.nameOfScence)).then((function(t){ze(t.data,e),Ce(!1)})).catch((function(e){console.log(e),Ce(!1)})))},Ze=function(){te(""),ce(""),ue(""),Y(null),fe(!1)};return r.a.createElement("div",{className:"outerContainer"},r.a.createElement("div",{id:"container",className:"map",style:{height:"".concat(xe(),"px")}},c&&c.length>0?r.a.createElement(an.Map,{google:t,zoom:15,containerStyle:oe,onReady:Ve,onClick:Xe,center:Q},c.map((function(e,t){var a={};return a.lat=parseFloat(e.latitude),a.lng=parseFloat(e.longitude),r.a.createElement(an.Marker,{key:t,ref:function(e){e&&(Ge.current[t]=e)},title:e.nameOfScence,onClick:Ye,position:a})})),r.a.createElement(rn,{marker:V,visible:pe,onClose:Ze},r.a.createElement("div",{className:"windowContainerForGoogle"},r.a.createElement("p",null,ee),r.a.createElement("p",null,re),r.a.createElement("div",{className:"imgContainer"},r.a.createElement("img",{className:"img",src:se,alt:"",onClick:function(){console.log("\u70b9\u51fb\u56fe\u7247"),C(!0)}})),r.a.createElement("div",{className:"btnContainer"},r.a.createElement("div",{onClick:He},"\u666f\u70b9\u6392\u5e8f"),r.a.createElement("div",{onClick:function(){return Qe(ee)}},"\u5220\u9664\u6b64\u70b9"))))):r.a.createElement(an.Map,{google:t,zoom:15,containerStyle:oe,onReady:Ve,onClick:Xe,center:Q},c.map((function(e,t){var a={};return a.lat=parseFloat(e.latitude),a.lng=parseFloat(e.longitude),r.a.createElement(an.Marker,{key:t,title:e.nameOfScence,onClick:Ye,position:a})})),r.a.createElement(rn,{marker:V,visible:pe,onClose:Ze},r.a.createElement("div",{className:"windowContainerForGoogle"},r.a.createElement("p",null,ee),r.a.createElement("p",null,re),r.a.createElement("div",{className:"imgContainer"},r.a.createElement("img",{className:"img",src:se,alt:""})),r.a.createElement("div",{className:"btnContainer"},r.a.createElement("div",{onClick:He},"\u666f\u70b9\u6392\u5e8f"),r.a.createElement("div",{onClick:function(){return Qe(ee)}},"\u5220\u9664\u6b64\u70b9")))))),r.a.createElement("div",{className:"textFieldContainer"},r.a.createElement(oa.a,{variant:"outlined"},r.a.createElement(ra.a,{htmlFor:"outlined-adornment-password"},"\u8bf7\u8f93\u5165\u5173\u952e\u5b57"),r.a.createElement(Ka.a,{id:"outlined-adornment-password",type:"text",value:v,onChange:function(e){b(e.target.value)},endAdornment:_e?r.a.createElement(aa.a,{position:"end"},r.a.createElement(w.a,{"aria-label":"toggle password visibility",edge:"end"},r.a.createElement(qt.a,{size:20}))):y&&y.length>0?r.a.createElement(aa.a,{position:"end"},r.a.createElement(w.a,{"aria-label":"toggle password visibility",onClick:function(){j([]),b(""),ye&&(ye.setMap(null),je(null))},edge:"end"},r.a.createElement(Je.a,null))):r.a.createElement(aa.a,{position:"end"},r.a.createElement(w.a,{"aria-label":"toggle password visibility",onClick:function(){if(Ue(!0),v.trim()&&""!==v.trim()){var e={query:v.trim(),fields:["name","formatted_address","geometry"]};try{ve.findPlaceFromQuery(e,(function(e,a){a===t.maps.places.PlacesServiceStatus.OK&&e&&(console.log(e[0].geometry.location.lat()),j(e),Ue(!1))}))}catch(a){alert("\u7cfb\u7edf\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"),console.log(a),Ue(!1)}}},edge:"end"},r.a.createElement(Ya.a,null))),label:"Password"})),r.a.createElement("div",{className:"resultsContainer"},y&&y.length>0?r.a.createElement(ka.a,null,y.map((function(e,a){return r.a.createElement("div",{key:a,onClick:function(){!function(e){ye&&ye.setMap(null);var a=e.geometry.location.lat(),n=e.geometry.location.lng(),r=new t.maps.Marker({position:{lat:a,lng:n},map:p,title:e.name}),c=new t.maps.InfoWindow({content:Fe(e.name,We,e),ariaLabel:e.name});r.addListener("click",(function(){c.open({anchor:r,mapG:p})}));var i={};i.lat=a,i.lng=n,q(i),je(r)}(e)}},r.a.createElement(ja.a,null,r.a.createElement(wa.a,{primary:e.name})))}))):null)),r.a.createElement("div",{className:"listContainer",style:{left:document.body.clientWidth<xe()?"20px":"220px",maxHeight:"".concat(xe()-100,"px"),overflowY:"auto",position:"absolute"}},c&&c.length>0?r.a.createElement(ka.a,null,c.map((function(e,t){return r.a.createElement("div",{key:e.nameOfScence,onClick:function(){!function(e){L(new Re(c[e].nameOfScence,c[e].longitude,c[e].latitude,c[e].des,c[e].picURL)),Me(c[e]);var t=Ge.current[e];t&&(te(c[e].nameOfScence),ce(c[e].des),ue(c[e].picURL),Y(t.marker),fe(!0))}(t)}},r.a.createElement(ja.a,null,r.a.createElement(wa.a,{primary:e.nameOfScence})),r.a.createElement(Da.a,null))}))):null),r.a.createElement(Ja.a,{open:k,onClose:Be},r.a.createElement(Xa.a,null,"\u8bf7\u5b8c\u5584\u5982\u4e0b\u4fe1\u606f\uff1a"),r.a.createElement("div",{className:"textContainer"},r.a.createElement(bt.a,{label:"nameOfScence",value:P.nameOfScence,onChange:function(e){ze(e.target.value,"nameOfScence")}}),r.a.createElement("div",null,r.a.createElement(bt.a,{label:"longitude",value:P.longitude,onChange:function(e){ze(e.target.value,"longitude")}}),r.a.createElement(bt.a,{label:"latitude",value:P.latitude,onChange:function(e){ze(e.target.value,"latitude")}})),r.a.createElement(bt.a,{label:"des",multiline:!0,value:P.des,onChange:function(e){ze(e.target.value,"des")},InputProps:{endAdornment:r.a.createElement(aa.a,{position:"end"},r.a.createElement($e.a,{variant:"text",onClick:function(){return qe("des")},size:"small"},Ie?"\u6b63\u5728\u83b7\u53d6\u63cf\u8ff0\u4e2d":"\u83b7\u53d6\u63cf\u8ff0"))}}),r.a.createElement(bt.a,{multiline:!0,label:"picURL",value:P.picURL,onChange:function(e){ze(e.target.value,"picURL")},InputProps:{endAdornment:r.a.createElement(aa.a,{position:"end"},r.a.createElement($e.a,{variant:"text",onClick:function(){return qe("picURL")},size:"small"},ke?"\u6b63\u5728\u83b7\u53d6\u56fe\u7247\u4e2d":"\u83b7\u53d6\u56fe\u7247"))}}),r.a.createElement(bt.a,{label:"pointOrNot",value:P.pointOrNot,onChange:function(e){ze(e.target.value,"pointOrNot")}}),r.a.createElement(bt.a,{label:"category",value:P.category,onChange:function(e){ze(e.target.value,"category")}}),r.a.createElement(bt.a,{label:"contructor",value:P.contructor,onChange:function(e){ze(e.target.value,"contructor")}}),r.a.createElement("div",{className:"btnContainer"},r.a.createElement($e.a,{color:"primary",variant:"contained",onClick:function(){if(""===P.des||""===P.picURL)return alert("\u6709\u672a\u586b\u9879\u76ee\uff01");var e=c.findIndex((function(e){return e.nameOfScence===P.nameOfScence}));if(-1===e)o(Object(ma.a)({},P)),Be(),L(new Re(c[0].nameOfScence,c[0].longitude,c[0].latitude,c[0].des,c[0].picURL)),j([]),b(""),ye&&(ye.setMap(null),je(null));else{s(e,Object(ma.a)({},P)),Be();c.with(e,Object(ma.a)({},P));L(new Re(c[e].nameOfScence,c[e].longitude,c[e].latitude,c[e].des,c[e].picURL)),te("")}}},"\u4fdd\u5b58\u5230\u5f53\u65e5\u884c\u7a0b")))),r.a.createElement(Ja.a,{open:I,onClose:function(){T(!1)}},r.a.createElement(Xa.a,null,"\u8bf7\u62d6\u52a8\u6392\u5e8f\uff1a"),r.a.createElement("div",{className:"replanContainer2"},a.map((function(e,t){return r.a.createElement("div",{key:t,className:"replanContainer1"},r.a.createElement("div",{className:"titlereplan"},"\u7b2c".concat(t+1,"\u5929")),r.a.createElement(Qa.Container,{orientation:"horizontal",className:"replanContainer",style:De,groupName:"1",getChildPayload:function(e){return function(e,t){console.log("\u5c06\u7b2c".concat(t+1,"\u5929\u7684\u7b2c").concat(e+1,"\u4e2a\u666f\u70b9\u79fb\u52a8\u5230\uff1a"));var n=a[t][e];Object.keys(n).forEach((function(e){G[e]=n[e]})),0!==B&&B(0)}(e,t)},onDrop:Ke},e.map((function(e,t){return r.a.createElement(Qa.Draggable,{key:e.nameOfScence,style:{height:"30px"}},r.a.createElement("div",{className:"itemContainer"},e.nameOfScence))}))))})))))})),rn=function(e){function t(e){var a;return Object(ne.a)(this,t),(a=Object($a.a)(this,Object(en.a)(t).call(this,e))).infoWindowRef=r.a.createRef(),a.contentElement=document.createElement("div"),a}return Object(tn.a)(t,e),Object(Za.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&(i.a.render(r.a.Children.only(this.props.children),this.contentElement),this.infoWindowRef.current.infowindow.setContent(this.contentElement))}},{key:"render",value:function(){return r.a.createElement(an.InfoWindow,Object.assign({ref:this.infoWindowRef},this.props))}}]),t}(n.Component),cn=Object(m.a)((function(e){return{root:{display:"flex"},drawer:Object(Ra.a)({},e.breakpoints.up("sm"),{width:200,flexShrink:0}),appBar:Object(Ra.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(200,"px)"),marginLeft:200}),menuButton:Object(Ra.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:200},content:{flexGrow:1},contentMode:{flexGrow:1,padding:e.spacing(3)},drawerTitle:{display:"flex",flexDirection:"column",alignItems:"center"},btn:{marginTop:e.spacing(1)},title:{flexGrow:1},mapContainer:{},coverBTN:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"end"},coverUrlTextContainer:{width:"100%"}}}));var on=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.window,a=e.trip,n=e.dispatch,c=e.location,i=cn(),o=Object(M.a)(),l=r.a.useState(!1),s=Object(u.a)(l,2),m=s[0],d=s[1],p=r.a.useState(0),f=Object(u.a)(p,2),g=f[0],h=f[1],v=r.a.useState(a||c.params),b=Object(u.a)(v,2),E=b[0],O=b[1],y=r.a.useState(!1),j=Object(u.a)(y,2),x=j[0],S=j[1],N=function(e,t,a){E.detail[g][a][t]="category"===t?parseInt(e.target.value):e.target.value,O(Object(ma.a)({},E))},A=function(e){E.detail[g].splice(e,1),O(Object(ma.a)({},E))},I=function(){d(!m)},T=function(e){var t=JSON.parse(JSON.stringify(E));t.detail=e,console.log("\u7ec8\u6781\u6570\u636e\uff1a",t),O(t)},R=function(e){console.log(e);var t=null;"edit"!==e?(e.longitude=e.longitude.toString(),e.latitude=e.latitude.toString(),t=Object(ma.a)({},e)):t=new Re,console.log("\u5373\u5c06\u5b58\u7684\u503c\uff1a",t),E.detail.length>0&&(E.detail[g].push(t),O(Object(ma.a)({},E)))},D=function(e,t){E.detail[g][e]=t,O(Object(ma.a)({},E))},P=r.a.createElement("div",null,r.a.createElement("div",{className:i.toolbar},r.a.createElement("p",{className:i.drawerTitle},E.tripName),r.a.createElement("p",{className:i.drawerTitle},"by ".concat(E.designer)),r.a.createElement("p",{className:i.drawerTitle},"\u57ce\u5e02\uff1a".concat(E.city)),r.a.createElement("p",{className:i.drawerTitle},"\u56fd\u5bb6\uff1a".concat(E.country)),r.a.createElement("p",{className:i.drawerTitle},"\u6807\u7b7e\uff1a".concat(E.tags))),r.a.createElement("img",{alt:"",src:null===E||void 0===E?void 0:E.cover,width:"100%"}),r.a.createElement("div",null,r.a.createElement(bt.a,{className:i.coverUrlTextContainer,value:(null===E||void 0===E?void 0:E.cover)||"",id:"cover",label:"\u5c01\u9762",onChange:function(e){var t;t=e.target.value,E.cover=t,O(Object(ma.a)({},E))}})),r.a.createElement(Da.a,null),r.a.createElement(ka.a,null,r.a.createElement(ja.a,{button:!0,onClick:function(){E.detail.push([]),O(Object(ma.a)({},E))}},"\u6dfb\u52a0\u4e00\u65e5\u884c\u7a0b",r.a.createElement(Fa.a,null,r.a.createElement(Ma.a,null))),null!=E.detail&&E.detail.length>0?E.detail.map((function(e,t){return r.a.createElement(ja.a,{button:!0,key:t,selected:g===t,onClick:function(){h(t)}},r.a.createElement(wa.a,{primary:"Day".concat(t+1)}),r.a.createElement(Fa.a,{onClick:function(e){!function(e,t){e.stopPropagation(),E.detail.splice(t,1),O(Object(ma.a)({},E)),t===g&&h(0)}(e,t)}},r.a.createElement(Ha.a,null)))})):null),r.a.createElement(Da.a,null)),L=void 0!==t?function(){return t().document.body}:void 0;return r.a.createElement("div",{className:i.root},r.a.createElement(Pt.a,null),E?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{position:"fixed",className:i.appBar},r.a.createElement(k.a,null,r.a.createElement(w.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:I,className:i.menuButton},r.a.createElement(Ua.a,null)),r.a.createElement(H.a,{variant:"h6",noWrap:!0,className:i.title},r.a.createElement(Dt.a,{color:"inherit",href:"/editinit"},"\u5730\u56fe\u6570\u636e\u7f16\u8f91")),E.detail.length>0&&E.detail[g]&&E.detail[g].length>=0?r.a.createElement($e.a,{style:{marginRight:"5px"},variant:"outlined",color:"inherit",onClick:function(){S(!x)}},x?"\u5730\u56fe\u6a21\u5f0f":"\u7f16\u8f91\u6a21\u5f0f"):null,x&&E.detail.length>0?r.a.createElement($e.a,{style:{marginRight:"5px"},variant:"outlined",color:"inherit",onClick:function(){return R("edit")}},"\u5f53\u5929\u65b0\u589e\u4e00\u70b9"):null,E.detail.length>0&&function(e){for(var t=0;t<e.length;t++)if(0===e[t].length)return!1;return!0}(E.detail)?r.a.createElement($e.a,{variant:"outlined",color:"inherit",onClick:function(){for(var e=E.detail,t=0;t<e.length;t++)for(var a=e[t],r=0;r<a.length;r++)if(!Ae(a[r]))return alert("\u6709\u672a\u586b\u7684\u9879\u76ee\uff01");n({type:"SAVETRIP_SAGA",payload:E})}},"SAVE"):null)),r.a.createElement("nav",{className:i.drawer,"aria-label":"mailbox folders"},r.a.createElement(La.a,{smUp:!0,implementation:"css"},r.a.createElement(Pa.a,{container:L,variant:"temporary",anchor:"rtl"===o.direction?"right":"left",open:m,onClose:I,classes:{paper:i.drawerPaper},ModalProps:{keepMounted:!0}},P)),r.a.createElement(La.a,{xsDown:!0,implementation:"css"},r.a.createElement(Pa.a,{classes:{paper:i.drawerPaper},variant:"permanent",open:!0},P))),r.a.createElement("main",{className:Object(ta.a)(!x&&i.content,x&&i.contentMode)},x&&E.detail[g]&&E.detail[g].length>0?E.detail[g].map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("div",{className:i.toolbar}),r.a.createElement("div",null,r.a.createElement(bt.a,{label:"nameOfScence",value:e.nameOfScence,onChange:function(e){N(e,"nameOfScence",t)}})),r.a.createElement("div",null,r.a.createElement(bt.a,{value:e.longitude,label:"longitude",onChange:function(e){N(e,"longitude",t)}}),r.a.createElement(bt.a,{value:e.latitude,label:"latitude",onChange:function(e){N(e,"latitude",t)}})),r.a.createElement("div",null,r.a.createElement(bt.a,{value:e.des,multiline:!0,label:"des",onChange:function(e){N(e,"des",t)}})),r.a.createElement("div",null,r.a.createElement(bt.a,{multiline:!0,label:"picURL",value:e.picURL,onChange:function(e){N(e,"picURL",t)}})),r.a.createElement(bt.a,{value:e.pointOrNot,label:"pointOrNot",onChange:function(e){N(e,"pointOrNot",t)}}),r.a.createElement(bt.a,{value:e.category,label:"category",onChange:function(e){N(e,"category",t)}}),r.a.createElement("div",null,r.a.createElement(bt.a,{value:e.contructor,label:"contructor",onChange:function(e){N(e,"contructor",t)}})),r.a.createElement("div",{className:i.btn},r.a.createElement($e.a,{color:"secondary",variant:"contained",onClick:function(){return A(t)}},"\u5220\u9664\u7b2c".concat(g+1,"\u5929\u7b2c").concat(t+1,"\u4e2a\u666f\u70b9"))),r.a.createElement(Da.a,null))})):1===E.domestic?r.a.createElement(qa,{data:E.detail[g],totalData:E.detail,removeItem:A,AddOneItem:R,selectedIndex:g,changePlan:T,rePlaceOneItem:D}):r.a.createElement(nn,{data:E.detail[g],totalData:E.detail,removeItem:A,AddOneItem:R,selectedIndex:g,changePlan:T,rePlaceOneItem:D}))):null)})),ln=a(653),sn=Object(m.a)((function(e){return{root:{height:"100%"},content:{padding:e.spacing(10,0,0,4),display:"flex",flexWrap:"wrap",justifyContent:"flex-start",minHeight:"80vh"},squareContainer:{display:"flex",flexDirection:"column",marginRight:e.spacing(1),marginBottom:e.spacing(1),border:"1px solid #ccc",borderRadius:"4px"},square:{width:100,height:100,cursor:"pointer",marginRight:0,overflow:"hidden",backgroundColor:"pink","&:hover":{transform:"scale(1.05)",transition:"transform 0.2s"}},image:{width:"100%",height:"100%",objectFit:"cover",display:"block"},sceneName:{textAlign:"center",fontSize:"0.8rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:100},emptyMessage:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1.5rem",color:"#666"},dialogImage:{maxWidth:"100%",maxHeight:"70vh"},inputContainer:{display:"flex",alignItems:"center",gap:e.spacing(2),padding:e.spacing(2),backgroundColor:"#fff"},input:{flex:1},divContainer:{marginLeft:e.spacing(1)}}}));function un(e){var t=e.history,a=(e.location,Object(n.useState)([])),c=Object(u.a)(a,2),i=c[0],o=c[1],l=Object(n.useState)(null),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(n.useState)(""),f=Object(u.a)(p,2),g=f[0],h=f[1],v=Object(n.useState)(""),b=Object(u.a)(v,2),E=b[0],O=b[1],y=Object(n.useState)(""),j=Object(u.a)(y,2),w=j[0],x=j[1],S=Object(n.useState)(!1),k=Object(u.a)(S,2),C=k[0],N=k[1],I=Object(n.useState)(!1),T=Object(u.a)(I,2),R=T[0],D=T[1],P=Object(n.useState)(!1),L=Object(u.a)(P,2),_=L[0],U=L[1],G=sn();Object(n.useEffect)((function(){pa.a.get("/api/trip/previewImgs").then((function(e){o(e.data)})).catch((function(e){return console.error("Error fetching images:",e)}))}),[]);var M=function(e){e.target.style.display="none"},F=function(){d(null),h(""),O(""),x(""),N(!1)},W=function(){var e=Object(ie.a)(ce.a.mark((function e(){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.prev=1,e.next=4,B();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("\u83b7\u53d6\u56fe\u7247\u5931\u8d25:",e.t0);case 9:return e.prev=9,U(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(ie.a)(ce.a.mark((function e(){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){w&&pa.a.get("/api/trip/getBingImg",{params:{point:w}}).then((function(t){console.log(t.data,_),t.data&&(h(t.data),d(t.data),e())})).catch((function(e){console.error("Error fetching images:",e),t(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:G.root},r.a.createElement(A,{title:"\u56fe\u7247\u9884\u89c8",history:t}),r.a.createElement("div",{className:G.content},i.length>0?i.map((function(e,t){return r.a.createElement("div",{key:t,className:G.squareContainer},r.a.createElement("div",{className:G.square,onClick:function(){return function(e){console.log(e),N(!0),d(e.url),h(e.url),O(e.tripName),x(e.nameOfScence),D(e.cover)}(e)}},r.a.createElement("img",{src:e.url,alt:"preview-".concat(t),className:G.image,onError:M})),r.a.createElement(H.a,{variant:"body2",className:G.sceneName},e.nameOfScence))})):r.a.createElement("div",{className:G.emptyMessage},"\u6682\u65e0\u56fe\u7247")),r.a.createElement(Ja.a,{open:C,onClose:F,maxWidth:"lg"},r.a.createElement(ln.a,null,r.a.createElement("img",{src:m,alt:"preview",className:G.dialogImage,onError:M,key:m}),r.a.createElement("div",{className:G.inputContainer},r.a.createElement(bt.a,{className:G.input,value:g,onChange:function(e){var t=e.target.value;h(t),d(t)},variant:"outlined",size:"small",fullWidth:!0}),r.a.createElement($e.a,{className:G.divContainer,variant:"contained",color:"primary",onClick:function(){console.log({url:g,nameOfScence:w,tripName:E,cover:R}),pa.a.post("/api/trip/updatePointImg",{url:g,nameOfScence:w,tripName:E,cover:R}).then((function(e){o((function(e){return e.map((function(e){return e.nameOfScence===w?Object(ma.a)({},e,{url:g}):e}))})),F()})).catch((function(e){return console.error("Error fetching images:",e)}))}},"\u4fdd\u5b58"),r.a.createElement($e.a,{className:G.divContainer,variant:"contained",color:"primary",onClick:W},_?"\u83b7\u53d6\u4e2d...":"\u83b7\u53d6\u56fe\u7247")))))}var mn=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){e.dispatch;var t=e.history,a=Object(n.useState)([]),c=Object(u.a)(a,2),i=c[0],o=c[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(n.useState)(null),f=Object(u.a)(p,2),g=f[0],h=f[1],v=Object(n.useState)(1),b=Object(u.a)(v,2),E=b[0],O=b[1],y=Object(n.useState)(0),j=Object(u.a)(y,2),w=j[0],x=j[1],S=Object(n.useCallback)((function(){var e=document.documentElement;e.scrollTop+e.clientHeight>=e.scrollHeight-50&&i.length-w===20&&!1===m&&(console.log("Loading more trips..."),d(!0),k(E+1),O(E+1))}),[w,i.length,m,E]);Object(n.useEffect)((function(){d(!0),k(E)}),[E]);var k=function(){var e=Object(ie.a)(ce.a.mark((function e(t){var a,n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/trip/getAllTrip?page=".concat(t));case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("Network response was not ok");case 6:return e.next=8,a.json();case 8:n=e.sent,o(Object(ea.a)(n)),d(!1),t>1&&x(i.length),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),h(e.t0.message),d(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return window.addEventListener("scroll",S),function(){window.removeEventListener("scroll",S)}}),[S]);return m&&1===E?r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",width:"100vw",position:"fixed",top:0,left:0,backgroundColor:"rgba(255, 255, 255, 0.8)"}},r.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold"}},"Loading...")):g?r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",width:"100vw",position:"fixed",top:0,left:0,backgroundColor:"rgba(255, 255, 255, 0.8)"}},r.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"red"}},"Error: ",g)):r.a.createElement("div",{style:{margin:0,padding:0}},r.a.createElement(A,{title:"\u884c\u7a0b\u5217\u8868",history:t}),r.a.createElement("div",{style:{margin:0,paddingTop:"50px"}},i.map((function(e,a){return r.a.createElement("div",{key:a,style:{position:"relative",margin:0,padding:0,cursor:"pointer"},onClick:function(){return function(e){console.log(e),t.push({pathname:"/show",params:e})}(e)}},e.detail&&e.detail[0]&&e.detail[0][0].picURL&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:e.detail[0][0].picURL,alt:"Trip ".concat(a),style:{height:"150px",width:"100%",objectFit:"cover",display:"block",margin:0,padding:0}}),r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"white",textShadow:"1px 1px 3px rgba(0,0,0,0.8)"}},r.a.createElement("h2",{style:{margin:0}},e.tripName),r.a.createElement("p",{style:{margin:"8px 0 0 0"}},"by:".concat(e.designer)))))}))))})),dn=a(671),pn=Object(n.forwardRef)((function(e,t){var a=e.totalData,c=e.data,i=e.removeItem,o=(e.AddOneItem,e.changePlan,e.pointIndex),l=Object(n.useState)(null),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(n.useState)([]),f=Object(u.a)(p,2),g=f[0],h=f[1],v=Object(n.useState)([]),b=Object(u.a)(v,2),E=b[0],O=b[1],y=Object(n.useState)(null),j=Object(u.a)(y,2),w=(j[0],j[1]),x=Object(n.useState)(!1),S=Object(u.a)(x,2),k=(S[0],S[1]),C=Object(n.useState)(!1),N=Object(u.a)(C,2),A=(N[0],N[1]),I=Object(n.useState)(new Re),T=Object(u.a)(I,1)[0];Object(n.useEffect)((function(){console.log("\u5730\u56fe\u5f00\u59cb\u6e32\u67d3\uff01",a),za.a.load({key:ue,version:"2.0",plugins:["AMap.Scale","AMap.Geolocation","AMap.AutoComplete","AMap.PlaceSearch"]}).then((function(e){var t=new e.Map("container",{viewMode:"3D",zoom:15,center:P(c,o)});t.addControl(new e.Scale),t.addControl(new e.Geolocation);var a=[],n=[],r=[];c&&c.length>0&&(c.forEach((function(c,o){r.push([parseFloat(c.longitude),parseFloat(c.latitude)]);var l=D(e,c.nameOfScence,c.des,c.picURL,i,U,G,o);n.push(l);var s=R(e,parseFloat(c.longitude),parseFloat(c.latitude),c.nameOfScence,o);s.on("click",(function(e){return F(e,l,t)})),a.push(s)})),t.add(a),n[o].open(t,r[o]),h(a),O(n)),w(e),d(t)})).catch((function(e){console.log(e)}))}),[a,c,null===c||void 0===c?void 0:c.length,i]);var R=function(e,t,a,n,r){return new e.Marker({position:new e.LngLat(t,a),title:n,extData:r})},D=function(e,t,a,n,r,c,i,o){return new e.InfoWindow({isCustom:!0,content:_(t,a,n,r,c,i,o),offset:new e.Pixel(0,-30)})},P=function(e,t){return e&&e.length>0?[parseFloat(e[t].longitude),parseFloat(e[t].latitude)]:[116.39,39.9]},L=function(){var e=c[o],t=e.longitude,a=e.latitude,n=/iPhone|iPad|iPod/i.test(navigator.userAgent),r=/Android/i.test(navigator.userAgent),i="";if(n)i="iosamap://path?sourceApplication=NextSticker&dlon=".concat(t,"&dlat=").concat(a,"&dev=0&t=2");else{if(!r)return void alert("\u5f53\u524d\u8bbe\u5907\u4e0d\u652f\u6301\u6253\u5f00\u9ad8\u5fb7\u5730\u56fe");i="amapuri://route/plan/?sourceApplication=NextSticker&dlat=".concat(a,"&dlon=").concat(t,"&dev=0&t=2")}window.location.href=i},_=function(e,t,a,n,r,c,i){var o=document.createElement("div");o.className="windowContainer";var l=document.createElement("div");l.className="title",l.innerHTML=e,o.appendChild(l);var s=document.createElement("div");if(s.className="des",s.innerHTML=t,t&&o.appendChild(s),a){var u=document.createElement("div");u.className="imgContainer";var m=document.createElement("img");m.className="img",m.src=a,m.onclick=L,u.appendChild(m),o.appendChild(u)}return o},U=function(){console.log("\u6dfb\u52a0\u8be6\u7ec6\u6570\u636e\u5f39\u7a97\uff1a"),console.log(M()),T.nameOfScence=M().name,T.longitude=M().lng,T.latitude=M().lat,k(!0)},G=function(e){A(!0)},M=function(){var e={},t=m.getAllOverlays("marker");return c.forEach((function(e){for(var a=0;a<t.length;a++)t[a].getTitle()===e.nameOfScence&&t.splice(a,1)})),e.name=t[0].getTitle(),e.lng=t[0].getPosition().lng,e.lat=t[0].getPosition().lat,e},F=function(e,t,a){try{console.log(e.target.getTitle());var n=e.target.getPosition();t.getIsOpen()?t.close():(t.open(a,n),a.panTo(n))}catch(r){console.error("Error in openOrcloseWindow:",r)}},W=function(e){E[e].getIsOpen()||E[e].open(m,g[e].getPosition()),m.panTo(g[e].getPosition())};return Object(n.useImperativeHandle)(t,(function(){return{choosePoint:W}})),r.a.createElement("div",{className:"outerContainer"},r.a.createElement("div",{id:"container",className:"map",style:{height:"".concat(xe(),"px")}}))})),fn=r.a.memo(pn),gn=Object(n.forwardRef)((function(e,t){var a=e.google,c=e.totalData,i=e.data,o=e.removeItem,l=(e.AddOneItem,e.changePlan,e.pointIndex),s=Object(n.useState)(null),m=Object(u.a)(s,2),d=(m[0],m[1]),p=Object(n.useState)(null),f=Object(u.a)(p,2),g=f[0],h=f[1],v=Object(n.useState)(null),b=Object(u.a)(v,2),E=b[0],O=b[1],y=Object(n.useState)(""),j=Object(u.a)(y,2),w=j[0],x=j[1],S=Object(n.useState)(""),k=Object(u.a)(S,2),C=k[0],N=k[1],A=Object(n.useState)(""),I=Object(u.a)(A,2),T=I[0],R=I[1],D=Object(n.useState)(!1),P=Object(u.a)(D,2),L=P[0],_=P[1],U=Object(n.useState)(null),G=Object(u.a)(U,2),M=(G[0],G[1]),F=Object(n.useRef)([]);Object(n.useEffect)((function(){console.log("google\u5730\u56fe\u5f00\u59cb\u6e32\u67d3\uff01",c,i),i&&i.length>0&&W(i[l]),L&&_(!1)}),[c,i,null===i||void 0===i?void 0:i.length,o]);var W=function(e){var t={};t.lat=parseFloat(e.latitude),t.lng=parseFloat(e.longitude),O(t)},H=function(e,t){console.log(t);var a=i.filter((function(t){return t.nameOfScence===e.title}));a[0].nameOfScence!==w?(x(a[0].nameOfScence),N(a[0].des),R(a[0].picURL),O(e.position),h(t),_(!0)):(x(""),N(""),R(""),h(null),_(!1))},B=function(e){console.log("\u70b9\u51fb\u4e86",e),W(i[e]);var t=F.current[e];t&&(x(i[e].nameOfScence),N(i[e].des),R(i[e].picURL),h(t.marker),_(!0))};Object(n.useImperativeHandle)(t,(function(){return{choosePoint:B}}));return r.a.createElement("div",{className:"outerContainer"},r.a.createElement("div",{id:"container",className:"map",style:{height:"".concat(xe(),"px")}},r.a.createElement(an.Map,{google:a,zoom:15,containerStyle:oe,onReady:function(e,t){console.log("\u5730\u56fe\u5b8c\u6210\u521d\u59cb\u5316\uff1a",e);var a=new e.google.maps.places.PlacesService(t);M(a),d(t),i&&i.length>0&&(x(i[0].nameOfScence),N(i[0].des),R(i[0].picURL),O({lat:parseFloat(i[0].latitude),lng:parseFloat(i[0].longitude)}),setTimeout((function(){F.current[0]&&(h(F.current[0].marker),_(!0))}),1e3))},onClick:function(e){console.log("\u70b9\u51fb\u5730\u56fe",e)},center:E},i.map((function(e,t){var a={};return a.lat=parseFloat(e.latitude),a.lng=parseFloat(e.longitude),r.a.createElement(an.Marker,{key:t,ref:function(e){e&&(F.current[t]=e)},title:e.nameOfScence,onClick:H,position:a})})),r.a.createElement(bn,{marker:g,visible:L,onClose:function(){x(""),N(""),R(""),h(null),_(!1)}},r.a.createElement("div",{className:"windowContainerForGoogle"},r.a.createElement("p",null,w),r.a.createElement("p",null,C),r.a.createElement("div",{className:"imgContainer"},r.a.createElement("img",{className:"img",src:T,alt:"",onClick:function(){var e=i[l],t=e.latitude,a=e.longitude,n=/iPhone|iPad|iPod/i.test(navigator.userAgent),r=/Android/i.test(navigator.userAgent),c="";if(n)c="comgooglemaps://?daddr=".concat(t,",").concat(a,"&directionsmode=transit");else{if(!r)return void alert("\u5f53\u524d\u5e73\u53f0\u6682\u4e0d\u652f\u6301\u5730\u56fe\u8df3\u8f6c");c="intent://maps.google.com/maps?daddr=".concat(t,",").concat(a,"&directionsmode=transit#Intent;scheme=https;package=com.google.android.apps.maps;end;")}window.location.href=c}})))))))})),hn=Object(n.forwardRef)((function(e,t){var a=Object(an.GoogleApiWrapper)({apiKey:se})((function(e){return r.a.createElement(gn,Object.assign({},e,{ref:t}))}));return r.a.createElement(a,e)})),vn=r.a.memo(hn),bn=function(e){function t(e){var a;return Object(ne.a)(this,t),(a=Object($a.a)(this,Object(en.a)(t).call(this,e))).infoWindowRef=r.a.createRef(),a.contentElement=document.createElement("div"),a}return Object(tn.a)(t,e),Object(Za.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&(i.a.render(r.a.Children.only(this.props.children),this.contentElement),this.infoWindowRef.current.infowindow.setContent(this.contentElement))}},{key:"render",value:function(){return r.a.createElement(an.InfoWindow,Object.assign({ref:this.infoWindowRef},this.props))}}]),t}(n.Component),En=a(669),On=a(670),yn=r.a.memo(fn),jn=r.a.memo(vn),wn=Object(m.a)((function(e){return{root:{display:"flex"},drawer:Object(Ra.a)({},e.breakpoints.up("sm"),{width:200,flexShrink:0}),appBar:Object(Ra.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(200,"px)"),marginLeft:200}),menuButton:Object(Ra.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:200},content:{flexGrow:1},contentMode:{flexGrow:1,padding:e.spacing(3)},drawerTitle:{display:"flex",flexDirection:"column",alignItems:"center"},btn:{marginTop:e.spacing(1)},title:{flexGrow:1},mapContainer:{},coverBTN:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"end"},coverUrlTextContainer:{width:"100%"}}}));var xn=Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t,a=e.window,c=e.trip,i=(e.dispatch,e.location),o=e.pointIndex,l=wn(),s=Object(M.a)(),m=r.a.useState(!1),d=Object(u.a)(m,2),p=d[0],f=d[1],g=r.a.useState(0),h=Object(u.a)(g,2),v=h[0],b=h[1],E=r.a.useState(c||i.params),O=Object(u.a)(E,1)[0],y=r.a.useState(!1),j=Object(u.a)(y,1)[0],x=Object(n.useRef)(),S=Object(n.useRef)(),N=function(){f(!p)},A=r.a.createElement("div",null,r.a.createElement(C.a,{position:"static",color:"primary",elevation:0},r.a.createElement(k.a,null,r.a.createElement(H.a,{variant:"h6"},"\u884c\u7a0b\u4fe1\u606f\u5982\u4e0b\uff1a"))),r.a.createElement(Da.a,null),r.a.createElement(ka.a,null,null===O||void 0===O?void 0:null===(t=O.detail)||void 0===t?void 0:t.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(ja.a,{button:!0,onClick:function(){return b(t)},selected:v===t},r.a.createElement(wa.a,{primary:"\u7b2c ".concat(t+1," \u5929")}),v===t?r.a.createElement(En.a,{style:{marginRight:8}}):r.a.createElement(On.a,{style:{marginRight:8}})),r.a.createElement(dn.a,{in:v===t,timeout:"auto",unmountOnExit:!0},r.a.createElement(ka.a,{component:"div",disablePadding:!0},e.map((function(e,t){return r.a.createElement(ja.a,{key:t,button:!0,sx:{pl:4},onClick:function(){return function(e,t){var a=null===e||void 0===e?void 0:e.detail.flat(1/0).map((function(e,t){return{item1:e,index:t}})).filter((function(e){return e.item1.nameOfScence===t.nameOfScence}));x.current&&1===e.domestic?x.current.choosePoint(a[0].index):S.current&&0===e.domestic&&S.current.choosePoint(a[0].index),f(!p)}(O,e)}},r.a.createElement(wa.a,{primary:e.nameOfScence}))})))))})))),I=void 0!==a?function(){return a().document.body}:void 0,T=r.a.useMemo((function(){return O.detail.flat(1/0)}),[O.detail]);return r.a.createElement("div",{className:l.root},r.a.createElement(Pt.a,null),O?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{position:"fixed",className:l.appBar},r.a.createElement(k.a,null,r.a.createElement(w.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:N,className:l.menuButton},r.a.createElement(Ua.a,null)),r.a.createElement(H.a,{variant:"h6",noWrap:!0,className:l.title},r.a.createElement(Dt.a,{color:"inherit",href:"/editinit"},"\u5730\u56fe\u6570\u636e\u7f16\u8f91")))),r.a.createElement("nav",{className:l.drawer,"aria-label":"mailbox folders"},r.a.createElement(La.a,{smUp:!0,implementation:"css"},r.a.createElement(Pa.a,{container:I,variant:"temporary",anchor:"rtl"===s.direction?"right":"left",open:p,onClose:N,classes:{paper:l.drawerPaper},ModalProps:{keepMounted:!0}},A)),r.a.createElement(La.a,{xsDown:!0,implementation:"css"},r.a.createElement(Pa.a,{classes:{paper:l.drawerPaper},variant:"permanent",open:!0},A))),r.a.createElement("main",{className:Object(ta.a)(!j&&l.content,j&&l.contentMode)},1===O.domestic?r.a.createElement(yn,{data:T,totalData:O.detail,ref:x,pointIndex:o}):r.a.createElement(jn,{data:T,totalData:O.detail,ref:S,pointIndex:o}))):null)})),Sn=Object(l.g)(Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.user,a=(e.path,e.component),n=Object(o.a)(e,["user","path","component"]);return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(l.a,{to:"/signin"})}}))}))),kn=Object(l.g)(Object(s.c)((function(e){return e}),(function(e){return{dispatch:e}}))((function(e){var t=e.trip,a=e.component,n=Object(o.a)(e,["trip","component"]);return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return e.location.params||t?r.a.createElement(a,e):r.a.createElement(l.a,{to:"/editinit"})}}))}))),Cn=function(){return r.a.createElement(l.d,null,r.a.createElement(Sn,{path:"/",component:vt,exact:!0,key:"main"}),",",r.a.createElement(Sn,{path:"/submit",component:It,exact:!0,key:"submit"}),",",r.a.createElement(Sn,{path:"/submitArrange",component:Rt,exact:!0,key:"submitArrange"}),",",r.a.createElement(l.b,{path:"/signin",component:zt,exact:!0,key:"signin"}),",",r.a.createElement(l.b,{path:"/logon",component:Jt,exact:!0,key:"logon"}),",",r.a.createElement(l.b,{path:"/photos",component:$t,exact:!0,key:"photos"}),",",r.a.createElement(Sn,{path:"/photosInput",component:va,exact:!0,key:"photosInput"}),",",r.a.createElement(Sn,{path:"/photosEdit",component:ya,exact:!0,key:"photosEdit"}),",",r.a.createElement(Sn,{path:"/story",component:ga,exact:!0,key:"story"}),",",r.a.createElement(Sn,{path:"/totalStorys",component:Sa,exact:!0,key:"totalstorys"}),",",r.a.createElement(Sn,{path:"/client",component:Ta,exact:!0,key:"client"}),",",r.a.createElement(Sn,{path:"/editinit",component:ua,exact:!0,key:"editinit"}),",",r.a.createElement(Sn,{path:"/totalTrips",component:Aa,exact:!0,key:"totalTrips"}),",",r.a.createElement(kn,{path:"/edit",component:on,exact:!0,key:"edit"}),",",r.a.createElement(Sn,{path:"/preview",component:un,exact:!0,key:"preview"}),",",r.a.createElement(Sn,{path:"/list",component:mn,exact:!0,key:"list"}),",",r.a.createElement(kn,{path:"/show",component:xn,exact:!0,key:"show"}),",")},Nn=a(118),An=a(71),In=a(298),Tn=a(270),Rn=a(63),Dn={chartData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_CHART_DATA":return n}return e},tableData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_TABLE_DATA":return n}return e},left:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_LEFT":return n}return e},right:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_RIGHT":return n}return e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_USER":return n}return e},trip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_TRIP":return n}return e},item:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ITEM":return n}return e},all:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ALL":return n}return e},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_LOADING":return n}return e},whichPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_PAGE":return n}return e},pointIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_POINT_INDEX":return n}return e},fenye:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_FENYE":return n}return e},nextstickerUsersIncreased:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_NEXTSTICKERUSERSINCREASED":return n}return e},workers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be(Ee),t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_WORKERS":var r=Object(ea.a)(e);return r.forEach((function(e){e.forEach((function(e,t){n&&e.name===n?e.isChoosed=!e.isChoosed:n||(e.isChoosed=!1)}))})),r}return e},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_WORKERS":if(!n)return[];var r=Object(ea.a)(e);if(r.length>0){var c=r.findIndex((function(e){return e===n}));c>-1?r.splice(c,1):r.push(n)}else r.push(n);return r}return e},arrangeData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ARRANGEDATA":var r=n.date,c=n.list,i={date:r,list:c},o=Object(ea.a)(e),l=o.findIndex((function(e){return e.date===r}));return l>-1?o.splice(l,1,i):(o.push(i),o.sort((function(e,t){return e.date-t.date}))),pe("ARRANGEDATA",o,3e3),o;case"SET_ARRANGEDATA_ARRAY":var s=Object(ea.a)(n);return s;case"SET_ARRANGEDATA_DELETE":var u=Object(ea.a)(e);return u.splice(n,1),pe("ARRANGEDATA",u,3e3),u}return e},pageIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_PAGEINDEX":return n}return e}},Pn=a(37),Ln=a(18),_n=ce.a.mark(Xn),Un=ce.a.mark(Qn),Gn=ce.a.mark(qn),Mn=ce.a.mark(Zn),Fn=ce.a.mark($n),Wn=ce.a.mark(er),Hn=ce.a.mark(tr),Bn=ce.a.mark(ar),zn=ce.a.mark(nr),Kn=ce.a.mark(rr),Vn=ce.a.mark(cr),Yn=ce.a.mark(ir),Jn=ce.a.mark(or);function Xn(e){var t;return ce.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.payload,!(Ee.findIndex((function(e){return e.name===t}))>-1)){a.next=7;break}return a.next=5,Object(Ln.b)(dt(t));case 5:a.next=8;break;case 7:return a.abrupt("return");case 8:case"end":return a.stop()}}),_n)}function Qn(){var e;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((e=fe("ARRANGEDATA"))&&Date.now()<e.expires)){t.next=7;break}return t.next=4,Object(Ln.b)({type:"SET_ARRANGEDATA_ARRAY",payload:e.data});case 4:return t.abrupt("return");case 7:if(!e){t.next=11;break}ge("ARRANGEDATA"),t.next=12;break;case 11:return t.abrupt("return");case 12:case"end":return t.stop()}}),Un)}function qn(){var e;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((e=fe("USER"))&&Date.now()<e.expires)){t.next=7;break}return t.next=4,Object(Ln.b)(ut(e.data));case 4:return t.abrupt("return");case 7:if(!e){t.next=11;break}ge("USER"),t.next=12;break;case 11:return t.abrupt("return");case 12:case"end":return t.stop()}}),Gn)}function Zn(e){var t;return ce.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,pa.a.post("/api/users/login",Object(ma.a)({},e.payload));case 3:if(!(t=a.sent).data){a.next=13;break}return a.next=7,Object(Ln.b)(ut(t.data.name));case 7:return pe("USER",t.data.name,3e3),pe("TOKEN",t.data.token,3e3),a.next=11,Object(Ln.b)(Object(Pn.d)("/"));case 11:a.next=14;break;case 13:alert("\u67e5\u65e0\u6b64\u4eba\uff01");case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),alert(a.t0);case 19:case"end":return a.stop()}}),Mn,null,[[0,16]])}function $n(e){var t;return ce.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,pa.a.post("/api/users",Object(ma.a)({},e.payload));case 3:(t=a.sent).data&&"string"===typeof t.data?alert("\u7528\u6237\u5df2\u5b58\u5728\uff0c\u8bf7\u76f4\u63a5\u767b\u5f55\uff01"):t.data&&"object"===typeof t.data?alert("\u6ce8\u518c\u6210\u529f\uff01\uff01"):alert("\u7cfb\u7edf\u51fa\u9519\uff0c\u7a0d\u540e\u518d\u8bd5\uff01"),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),alert(a.t0);case 10:case"end":return a.stop()}}),Fn,null,[[0,7]])}function er(){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa.a.post("/api/users/logout");case 2:return e.next=4,Object(Ln.b)(ut(null));case 4:return ge("USER"),ge("TOKEN"),e.next=8,Object(Ln.b)(mt(0));case 8:case"end":return e.stop()}}),Wn)}function tr(e){return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pa.a.post("/api/work/submit",Object(ma.a)({},e.payload),{headers:{Authorization:"Bearer "+fe("TOKEN").data}});case 2:if(!t.sent.data){t.next=6;break}return t.next=6,Object(Ln.b)(Object(Pn.d)("/"));case 6:case"end":return t.stop()}}),Hn)}function ar(e){var t,a;return ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ln.b)(ot(!0));case 2:return n.next=4,pa.a.get("/api/work/count",{params:{page:e.payload}});case 4:return t=n.sent,n.next=7,Object(Ln.b)({type:"SET_CHART_DATA",payload:t.data.output});case 7:return n.next=9,Object(Ln.b)({type:"SET_TABLE_DATA",payload:t.data.arrWork});case 9:return n.next=11,Object(Ln.b)({type:"SET_ALL",payload:t.data.total});case 11:return n.next=13,Object(Ln.b)(ot(!1));case 13:return a=e.payload+1,n.next=16,Object(Ln.b)(st(a));case 16:case"end":return n.stop()}}),Bn)}function nr(e){var t,a,n,r,c,i,o;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=0,n=0,r=[],c=[],i=0;case 6:if(!(i<Ie.length)){e.next=15;break}return e.next=9,Ce(Ie[i],Ne);case 9:o=e.sent,t.push(o),a>=n?(r.push(t[i]),n+=t[i].height):(c.push(t[i]),a+=t[i].height);case 12:i++,e.next=6;break;case 15:return e.next=17,Object(Ln.b)({type:"SET_LEFT",payload:c});case 17:return e.next=19,Object(Ln.b)(pt(r));case 19:case"end":return e.stop()}}),zn)}function rr(e){var t,a,n,r,c,i,o,l,s,u,m,d;return ce.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if("object"!==typeof e.payload){p.next=28;break}return console.log(e.payload),t=e.payload,a=t.tripName,n=t.designer,r=t.uid,c=t.domestic,i=t.city,o=t.country,l=t.tags,s=t.cover,p.prev=3,p.next=6,pa.a.get("/api/trip/get",{params:{uid:r}});case 6:if(!(u=p.sent).data){p.next=15;break}return alert("\u8be5\u884c\u7a0b\u7f16\u53f7\u5bf9\u5e94\u7684\u884c\u7a0b\u5df2\u5b58\u5728\uff01"),p.next=11,Object(Ln.b)(it(u.data));case 11:return p.next=13,Object(Ln.b)(Object(Pn.d)("/edit"));case 13:p.next=21;break;case 15:return m=new Te(r,a,n,c,i,o,l,s,[[]]),console.log(m),p.next=19,Object(Ln.b)(it(m));case 19:return p.next=21,Object(Ln.b)(Object(Pn.d)("/edit"));case 21:p.next=26;break;case 23:p.prev=23,p.t0=p.catch(3),alert(p.t0);case 26:p.next=45;break;case 28:return p.prev=28,p.next=31,pa.a.get("/api/trip/get",{params:{uid:e.payload}});case 31:if(!(d=p.sent).data){p.next=39;break}return p.next=35,Object(Ln.b)(it(d.data));case 35:return p.next=37,Object(Ln.b)(Object(Pn.d)("/edit"));case 37:p.next=40;break;case 39:alert("\u65e0\u5bf9\u5e94\u7684\u884c\u7a0b\uff01");case 40:p.next=45;break;case 42:p.prev=42,p.t1=p.catch(28),alert(p.t1);case 45:case"end":return p.stop()}}),Kn,null,[[3,23],[28,42]])}function cr(e){return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pa.a.post("/api/trip/new",Object(ma.a)({},e.payload));case 3:if(!t.sent.data){t.next=8;break}return alert("\u4fdd\u5b58\u6210\u529f\uff01"),t.next=8,Object(Ln.b)(Object(Pn.d)("/editinit"));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),alert(t.t0);case 13:case"end":return t.stop()}}),Vn,null,[[0,10]])}function ir(e){return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pa.a.post("/api/trip/newItem",Object(ma.a)({},e.payload));case 3:if(!t.sent.data){t.next=10;break}return alert("\u6dfb\u52a0\u6210\u529f\uff01"),t.next=8,Object(Ln.b)({type:"SET_ITEM",payload:""});case 8:t.next=11;break;case 10:alert("\u4e0d\u53ef\u6dfb\u52a0\u91cd\u590d\u7684\u6587\u7ae0\uff01\uff01");case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),alert(t.t0);case 16:case"end":return t.stop()}}),Yn,null,[[0,13]])}function or(){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ln.a)([Object(Ln.c)("SET_LIST_SAGA",Xn),Object(Ln.c)("GET_ARRANGEDATA_SAGA",Qn),Object(Ln.c)("GET_USE_SAGA",qn),Object(Ln.c)("LOGIN_SAGA",Zn),Object(Ln.c)("REGISTER_SAGA_SAGA",$n),Object(Ln.c)("LOGOUT_SAGA",er),Object(Ln.c)("SUBMIT_SAGA",tr),Object(Ln.c)("COUNT_SAGA",ar),Object(Ln.c)("PHOTOS_SAGA",nr),Object(Ln.c)("NEWTRIP_SAGA",rr),Object(Ln.c)("NEWITEM_SAGA",ir),Object(Ln.c)("SAVETRIP_SAGA",cr)]);case 2:case"end":return e.stop()}}),Jn)}var lr=Object(Rn.a)(),sr=Object(Tn.a)(lr),ur=Object(In.a)(),mr=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||An.d,dr=Object(An.e)(Object(An.c)(Object(ma.a)({},Dn,{router:Object(Nn.b)(lr)})),{fenye:1,all:0,loading:!1,user:null,chartData:null,tableData:null,whichPage:0,workers:be(Ee),list:[],arrangeData:[],left:[],right:[],trip:null,item:"",pageIndex:1,nextstickerUsersIncreased:0,pointIndex:0},mr(Object(An.a)(sr,ur)));ur.run(or);var pr=dr;var fr=function(){return r.a.createElement(s.a,{store:pr},r.a.createElement(Nn.a,{history:lr},r.a.createElement(Cn,null)))},gr=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function hr(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(fr,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");gr?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):hr(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):hr(t,e)}))}}()}},[[344,1,2]]]);
//# sourceMappingURL=main.7040c574.chunk.js.map